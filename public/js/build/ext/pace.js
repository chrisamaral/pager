(function(){var G,O,n,l,P,u,x,Q,R,H,S,T,q,U,m,y,z,s,A,I,J,p,V,r,f,B,K,W,w,C,k,v,L,D,E,M,F,X,N,aa,Y,t=[].slice,Z={}.hasOwnProperty,$=function(a,b){function d(){this.constructor=a}for(var c in b)Z.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a},ba=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===a)return b;return-1};n={catchupTime:500,initialRate:0.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,
startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!1}};r=function(){var a;return null!=(a="undefined"!==typeof performance&&null!==performance?"function"===typeof performance.now?performance.now():void 0:void 0)?a:+new Date};B=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
window.msRequestAnimationFrame;z=window.cancelAnimationFrame||window.mozCancelAnimationFrame;null==B&&(B=function(a){return setTimeout(a,50)},z=function(a){return clearTimeout(a)});W=function(a){var b,d;b=r();d=function(){var c;c=r()-b;return 33<=c?(b=r(),a(c,function(){return B(d)})):setTimeout(d,33-c)};return d()};K=function(){var a,b,d;d=arguments[0];b=arguments[1];a=3<=arguments.length?t.call(arguments,2):[];return"function"===typeof d[b]?d[b].apply(d,a):d[b]};s=function(){var a,b,d,c,e,g,h;b=
arguments[0];c=2<=arguments.length?t.call(arguments,1):[];g=0;for(h=c.length;g<h;g++)if(d=c[g])for(a in d)Z.call(d,a)&&(e=d[a],null!=b[a]&&"object"===typeof b[a]&&null!=e&&"object"===typeof e?s(b[a],e):b[a]=e);return b};U=function(a){var b,d,c,e,g;e=d=b=0;for(g=a.length;e<g;e++)c=a[e],d+=Math.abs(c),b++;return d/b};l=function(){function a(){}a.prototype.on=function(b,a,c,e){var g;null==e&&(e=!1);null==this.bindings&&(this.bindings={});null==(g=this.bindings)[b]&&(g[b]=[]);return this.bindings[b].push({handler:a,
ctx:c,once:e})};a.prototype.once=function(b,a,c){return this.on(b,a,c,!0)};a.prototype.off=function(b,a){var c,e;if(null!=(null!=(c=this.bindings)?c[b]:void 0)){if(null==a)return delete this.bindings[b];c=0;for(e=[];c<this.bindings[b].length;)this.bindings[b][c].handler===a?e.push(this.bindings[b].splice(c,1)):e.push(c++);return e}};a.prototype.trigger=function(){var b,a,c,e,g,h,f;c=arguments[0];b=2<=arguments.length?t.call(arguments,1):[];if(null!=(a=this.bindings)&&a[c]){g=0;for(f=[];g<this.bindings[c].length;)h=
this.bindings[c][g],e=h.handler,a=h.ctx,h=h.once,e.apply(null!=a?a:this,b),h?f.push(this.bindings[c].splice(g,1)):f.push(g++);return f}};return a}();null==window.Pace&&(window.Pace={});s(Pace,l.prototype);f=Pace.options=s({},n,window.paceOptions,function(a,b){var d;null==a&&(a="options");null==b&&(b=!0);if(d=document.querySelector("[data-pace-"+a+"]")){d=d.getAttribute("data-pace-"+a);if(!b)return d;try{return JSON.parse(d)}catch(c){return"undefined"!==typeof console&&null!==console?console.error("Error parsing inline pace options",
c):void 0}}}());N=["ajax","document","eventLag","elements"];l=0;for(u=N.length;l<u;l++)k=N[l],!0===f[k]&&(f[k]=n[k]);x=function(a){function b(){return aa=b.__super__.constructor.apply(this,arguments)}$(b,a);return b}(Error);O=function(){function a(){this.progress=0}a.prototype.getElement=function(){var b;if(null==this.el){b=document.querySelector(f.target);if(!b)throw new x;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace("pace-done",
"");document.body.className+=" pace-running";this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>';null!=b.firstChild?b.insertBefore(this.el,b.firstChild):b.appendChild(this.el)}return this.el};a.prototype.finish=function(){var b;b=this.getElement();b.className=b.className.replace("pace-active","");b.className+=" pace-inactive";document.body.className=document.body.className.replace("pace-running","");return document.body.className+=
" pace-done"};a.prototype.update=function(b){this.progress=b;return this.render()};a.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(b){x=b}return this.el=void 0};a.prototype.render=function(){var b,a;if(null==document.querySelector(f.target))return!1;b=this.getElement();b.children[0].style.width=""+this.progress+"%";if(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)b.children[0].setAttribute("data-progress-text",""+(this.progress|
0)+"%"),100<=this.progress?a="99":(a=10>this.progress?"0":"",a+=this.progress|0),b.children[0].setAttribute("data-progress",""+a);return this.lastRenderedProgress=this.progress};a.prototype.done=function(){return 100<=this.progress};return a}();n=function(){function a(){this.bindings={}}a.prototype.trigger=function(b,a){var c,e,g,h,f;if(null!=this.bindings[b]){h=this.bindings[b];f=[];e=0;for(g=h.length;e<g;e++)c=h[e],f.push(c.call(this,a));return f}};a.prototype.on=function(b,a){var c;null==(c=this.bindings)[b]&&
(c[b]=[]);return this.bindings[b].push(a)};return a}();M=window.XMLHttpRequest;E=window.XDomainRequest;D=window.WebSocket;A=function(a,b){var d,c,e;e=[];for(d in b.prototype)try{c=b.prototype[d],null==a[d]&&"function"!==typeof c?e.push(a[d]=c):e.push(void 0)}catch(g){}return e};p=[];Pace.ignore=function(){var a,b;b=arguments[0];a=2<=arguments.length?t.call(arguments,1):[];p.unshift("ignore");a=b.apply(null,a);p.shift();return a};Pace.track=function(){var a,b;b=arguments[0];a=2<=arguments.length?t.call(arguments,
1):[];p.unshift("track");a=b.apply(null,a);p.shift();return a};C=function(a){var b;null==a&&(a="GET");return"track"===p[0]?"force":!p.length&&f.ajax&&("socket"===a&&f.ajax.trackWebSockets||(b=a.toUpperCase(),0<=ba.call(f.ajax.trackMethods,b)))?!0:!1};Q=function(a){function b(){var a,c=this;b.__super__.constructor.apply(this,arguments);a=function(a){var b;b=a.open;return a.open=function(d,f,k){C(d)&&c.trigger("request",{type:d,url:f,request:a});return b.apply(a,arguments)}};window.XMLHttpRequest=function(b){b=
new M(b);a(b);return b};A(window.XMLHttpRequest,M);null!=E&&(window.XDomainRequest=function(){var b;b=new E;a(b);return b},A(window.XDomainRequest,E));null!=D&&f.ajax.trackWebSockets&&(window.WebSocket=function(b,a){var d;d=new D(b,a);C("socket")&&c.trigger("request",{type:"socket",url:b,protocols:a,request:d});return d},A(window.WebSocket,D))}$(b,a);return b}(n);F=null;I=function(){null==F&&(F=new Q);return F};I().on("request",function(a){var b,d,c,e;e=a.type;c=a.request;if(!Pace.running&&(!1!==
f.restartOnRequestAfter||"force"===C(e)))return d=arguments,b=f.restartOnRequestAfter||0,"boolean"===typeof b&&(b=0),setTimeout(function(){var b,a,f,m;if("socket"===e?2>c.readyState:0<(b=c.readyState)&&4>b){Pace.restart();f=Pace.sources;m=[];b=0;for(a=f.length;b<a;b++)if(k=f[b],k instanceof G){k.watch.apply(k,d);break}else m.push(void 0);return m}},b)});G=function(){function a(){var b=this;this.elements=[];I().on("request",function(){return b.watch.apply(b,arguments)})}a.prototype.watch=function(b){var a;
a=b.type;b=b.request;a="socket"===a?new S(b):new T(b);return this.elements.push(a)};return a}();T=function(){return function(a){var b,d,c,e,f,h=this;this.progress=0;if(null!=window.ProgressEvent)for(a.addEventListener("progress",function(b){return b.lengthComputable?h.progress=100*b.loaded/b.total:h.progress+=(100-h.progress)/2}),f=["load","abort","timeout","error"],d=0,c=f.length;d<c;d++)b=f[d],a.addEventListener(b,function(){return h.progress=100});else e=a.onreadystatechange,a.onreadystatechange=
function(){var b;0===(b=a.readyState)||4===b?h.progress=100:3===a.readyState&&(h.progress=50);return"function"===typeof e?e.apply(null,arguments):void 0}}}();S=function(){return function(a){var b,d,c,e,f=this;this.progress=0;e=["error","open"];d=0;for(c=e.length;d<c;d++)b=e[d],a.addEventListener(b,function(){return f.progress=100})}}();l=function(){return function(a){var b,d,c;null==a&&(a={});this.elements=[];null==a.selectors&&(a.selectors=[]);c=a.selectors;b=0;for(d=c.length;b<d;b++)a=c[b],this.elements.push(new P(a))}}();
P=function(){function a(b){this.selector=b;this.progress=0;this.check()}a.prototype.check=function(){var b=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return b.check()},f.elements.checkInterval)};a.prototype.done=function(){return this.progress=100};return a}();n=function(){function a(){var b,a,c=this;this.progress=null!=(a=this.states[document.readyState])?a:100;b=document.onreadystatechange;document.onreadystatechange=function(){null!=c.states[document.readyState]&&
(c.progress=c.states[document.readyState]);return"function"===typeof b?b.apply(null,arguments):void 0}}a.prototype.states={loading:0,interactive:50,complete:100};return a}();u=function(){return function(){var a,b,d,c,e,g=this;a=this.progress=0;e=[];c=0;d=r();b=setInterval(function(){var h;h=r()-d-50;d=r();e.push(h);e.length>f.eventLag.sampleCount&&e.shift();a=U(e);return++c>=f.eventLag.minSamples&&a<f.eventLag.lagThreshold?(g.progress=100,clearInterval(b)):g.progress=3/(a+3)*100},50)}}();H=function(){function a(b){this.source=
b;this.last=this.sinceLastUpdate=0;this.rate=f.initialRate;this.progress=this.lastProgress=this.catchup=0;null!=this.source&&(this.progress=K(this.source,"progress"))}a.prototype.tick=function(b,a){var c;null==a&&(a=K(this.source,"progress"));100<=a&&(this.done=!0);a===this.last?this.sinceLastUpdate+=b:(this.sinceLastUpdate&&(this.rate=(a-this.last)/this.sinceLastUpdate),this.catchup=(a-this.progress)/f.catchupTime,this.sinceLastUpdate=0,this.last=a);a>this.progress&&(this.progress+=this.catchup*
b);c=1-Math.pow(this.progress/100,f.easeFactor);this.progress+=c*this.rate*b;this.progress=Math.min(this.lastProgress+f.maxProgressPerFrame,this.progress);this.progress=Math.max(0,this.progress);return this.lastProgress=this.progress=Math.min(100,this.progress)};return a}();y=q=L=m=w=v=null;Pace.running=!1;J=function(){if(f.restartOnPushState)return Pace.restart()};null!=window.history.pushState&&(X=window.history.pushState,window.history.pushState=function(){J();return X.apply(window.history,arguments)});
null!=window.history.replaceState&&(Y=window.history.replaceState,window.history.replaceState=function(){J();return Y.apply(window.history,arguments)});R={ajax:G,elements:l,document:n,eventLag:u};(V=function(){var a,b,d,c,e;Pace.sources=v=[];e=["ajax","elements","document","eventLag"];b=0;for(c=e.length;b<c;b++)a=e[b],!1!==f[a]&&v.push(new R[a](f[a]));a=null!=(d=f.extraSources)?d:[];d=0;for(b=a.length;d<b;d++)k=a[d],v.push(new k(f));Pace.bar=m=new O;w=[];return L=new H})();Pace.stop=function(){Pace.trigger("stop");
Pace.running=!1;m.destroy();y=!0;null!=q&&("function"===typeof z&&z(q),q=null);return V()};Pace.restart=function(){Pace.trigger("restart");Pace.stop();return Pace.start()};Pace.go=function(){Pace.running=!0;m.render();y=!1;return q=W(function(a,b){var d,c,e,g,h,l,n,p,q,s,t,u;d=n=0;c=!0;g=p=0;for(s=v.length;p<s;g=++p)for(k=v[g],l=null!=w[g]?w[g]:w[g]=[],g=null!=(u=k.elements)?u:[k],h=q=0,t=g.length;q<t;h=++q)e=g[h],e=null!=l[h]?l[h]:l[h]=new H(e),c&=e.done,e.done||(d++,n+=e.tick(a));m.update(L.tick(a,
n/d));d=r();return m.done()||c||y?(m.update(100),Pace.trigger("done"),setTimeout(function(){m.finish();Pace.running=!1;return Pace.trigger("hide")},Math.max(f.ghostTime,Math.min(f.minTime,r()-d)))):b()})};Pace.start=function(a){s(f,a);Pace.running=!0;try{m.render()}catch(b){x=b}return document.querySelector(".pace")?(Pace.trigger("start"),Pace.go()):setTimeout(Pace.start,50)};"function"===typeof define&&define.amd?define(function(){return Pace}):"object"===typeof exports?module.exports=Pace:f.startOnPageLoad&&
Pace.start()}).call(this);
