define(function(){(function(e){var c={},b=function(a){var d,e,h;b.classes.dispatcher.extend(this);var f=this;a=a||{};"string"===typeof a||a instanceof HTMLElement?a={renderers:[a]}:"[object Array]"===Object.prototype.toString.call(a)&&(a={renderers:a});d=a.renderers||a.renderer||a.container;if(!a.renderers||0===a.renderers.length)if("string"===typeof d||d instanceof HTMLElement||"object"===typeof d&&"container"in d)a.renderers=[d];if(a.id){if(c[a.id])throw'sigma: Instance "'+a.id+'" already exists.';
Object.defineProperty(this,"id",{value:a.id})}else{for(d=0;c[d];)d++;Object.defineProperty(this,"id",{value:""+d})}c[this.id]=this;this.settings=new b.classes.configurable(b.settings,a.settings||{});Object.defineProperty(this,"graph",{value:new b.classes.graph(this.settings),configurable:!0});Object.defineProperty(this,"middlewares",{value:[],configurable:!0});Object.defineProperty(this,"cameras",{value:{},configurable:!0});Object.defineProperty(this,"renderers",{value:{},configurable:!0});Object.defineProperty(this,
"renderersPerCamera",{value:{},configurable:!0});Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0});Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}});this._handler=function(a){var b,d={};for(b in a.data)d[b]=a.data[b];d.renderer=a.target;this.dispatchEvent(a.type,d)}.bind(this);h=a.renderers||[];d=0;for(e=h.length;d<e;d++)this.addRenderer(h[d]);h=a.middlewares||[];d=0;for(e=h.length;d<e;d++)this.middlewares.push("string"===typeof h[d]?b.middlewares[h[d]]:
h[d]);"object"===typeof a.graph&&a.graph&&(this.graph.read(a.graph),this.refresh());window.addEventListener("resize",function(){f.settings&&f.refresh()})};b.prototype.addCamera=function(a){var d=this,c;if(!arguments.length){for(a=0;this.cameras[""+a];)a++;a=""+a}if(this.cameras[a])throw'sigma.addCamera: The camera "'+a+'" already exists.';c=new b.classes.camera(a,this.graph,this.settings);this.cameras[a]=c;c.quadtree=new b.classes.quad;c.bind("coordinatesUpdated",function(a){d.renderCamera(c,c.isAnimated)});
this.renderersPerCamera[a]=[];return c};b.prototype.killCamera=function(a){a="string"===typeof a?this.cameras[a]:a;if(!a)throw"sigma.killCamera: The camera is undefined.";var b,c=this.renderersPerCamera[a.id];for(b=c.length-1;0<=b;b--)this.killRenderer(c[b]);delete this.renderersPerCamera[a.id];delete this.cameraFrames[a.id];delete this.cameras[a.id];a.kill&&a.kill();return this};b.prototype.addRenderer=function(a){var d,c,e=a||{};"string"===typeof e?e={container:document.getElementById(e)}:e instanceof
HTMLElement&&(e={container:e});if("id"in e)a=e.id;else{for(a=0;this.renderers[""+a];)a++;a=""+a}if(this.renderers[a])throw'sigma.addRenderer: The renderer "'+a+'" already exists.';d=(d="function"===typeof e.type?e.type:b.renderers[e.type])||b.renderers.def;c="camera"in e?e.camera instanceof b.classes.camera?e.camera:this.cameras[e.camera]||this.addCamera(e.camera):this.addCamera();if(this.cameras[c.id]!==c)throw"sigma.addRenderer: The camera is not properly referenced.";d=new d(this.graph,c,this.settings,
e);this.renderers[a]=d;Object.defineProperty(d,"id",{value:a});d.bind&&d.bind("click clickStage doubleClickStage clickNode clickNodes doubleClickNode doubleClickNodes overNode overNodes outNode outNodes downNode downNodes upNode upNodes".split(" "),this._handler);this.renderersPerCamera[c.id].push(d);return d};b.prototype.killRenderer=function(a){a="string"===typeof a?this.renderers[a]:a;if(!a)throw"sigma.killRenderer: The renderer is undefined.";var b=this.renderersPerCamera[a.camera.id],c=b.indexOf(a);
0<=c&&b.splice(c,1);a.kill&&a.kill();delete this.renderers[a.id];return this};b.prototype.refresh=function(){var a,d,c,e,f=0;e=this.middlewares||[];a=0;for(d=e.length;a<d;a++)e[a].call(this,0===a?"":"tmp"+f+":",a===d-1?"ready:":"tmp"+ ++f+":");for(c in this.cameras)a=this.cameras[c],a.settings("autoRescale")&&this.renderersPerCamera[a.id]&&this.renderersPerCamera[a.id].length?b.middlewares.rescale.call(this,e.length?"ready:":"",a.readPrefix,{width:this.renderersPerCamera[a.id][0].width,height:this.renderersPerCamera[a.id][0].height}):
b.middlewares.copy.call(this,e.length?"ready:":"",a.readPrefix),d=b.utils.getBoundaries(this.graph,a.readPrefix),a.quadtree.index(this.graph.nodes(),{prefix:a.readPrefix,bounds:{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}});e=Object.keys(this.renderers);a=0;for(d=e.length;a<d;a++)if(this.renderers[e[a]].process)if(this.settings("skipErrors"))try{this.renderers[e[a]].process()}catch(n){console.log('Warning: The renderer "'+e[a]+'" crashed on ".process()"')}else this.renderers[e[a]].process();
this.render();return this};b.prototype.render=function(){var a,b,c;c=Object.keys(this.renderers);a=0;for(b=c.length;a<b;a++)if(this.settings("skipErrors"))try{this.renderers[c[a]].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+c[a]+'" crashed on ".render()"')}else this.renderers[c[a]].render();return this};b.prototype.renderCamera=function(a,b){var c,e,f,n=this;if(b)for(f=this.renderersPerCamera[a.id],c=0,e=f.length;c<e;c++)if(this.settings("skipErrors"))try{f[c].render()}catch(k){this.settings("verbose")&&
console.log('Warning: The renderer "'+f[c].id+'" crashed on ".render()"')}else f[c].render();else if(!this.cameraFrames[a.id]){f=this.renderersPerCamera[a.id];c=0;for(e=f.length;c<e;c++)if(this.settings("skipErrors"))try{f[c].render()}catch(m){this.settings("verbose")&&console.log('Warning: The renderer "'+f[c].id+'" crashed on ".render()"')}else f[c].render();this.cameraFrames[a.id]=requestAnimationFrame(function(){delete n.cameraFrames[a.id]})}return this};b.prototype.kill=function(){var a;this.graph.kill();
delete this.middlewares;for(a in this.renderers)this.killRenderer(this.renderers[a]);for(a in this.cameras)this.killCamera(this.cameras[a]);delete this.renderers;delete this.cameras;for(a in this)this.hasOwnProperty(a)&&delete this[a];delete c[this.id]};b.instances=function(a){return arguments.length?c[a]:b.utils.extend({},c)};b.version="1.0.2";if("undefined"!==typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=b}).call(this);var f=this.sigma;(function(e){function c(a,
b){var d,e,m,k;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(a in arguments[0])c(a,arguments[0][a]);else if(1<arguments.length)for(k=Array.isArray(a)?a:a.split(/ /),d=0,e=k.length;d!==e;d+=1)m=k[d],x[m]||(x[m]=[]),x[m].push({handler:b})}function b(a,b){var d,c,e,m,k,l,p=Array.isArray(a)?a:a.split(/ /);b=void 0===b?{}:b;d=0;for(e=p.length;d!==e;d+=1)if(l=p[d],x[l])for(k={type:l,data:b||{}},c=0,m=x[l].length;c!==m;c+=1)try{x[l][c].handler(k)}catch(f){}}function a(a){var d=
w.length;s[a.id]=a;a.status="running";d&&(a.weightTime=w[d-1].weightTime,a.currentTime=a.weightTime*(a.weight||1));a.startTime=p();b("jobStarted",k(a));w.push(a)}function d(){var c,e;for(c in q)e=q[c],e.after?r[c]=e:a(e),delete q[c];for(u=!!w.length;w.length&&p()-t<z.frameDuration;){var m=void 0,k=void 0,l=m=void 0;e=!1;var k=p(),g=w.shift(),m=g.job(),k=p()-k;g.done++;g.time+=k;g.currentTime+=k;g.weightTime=g.currentTime/(g.weight||1);g.averageTime=g.time/g.done;l=g.count?g.count<=g.done:!m;if(!l){m=
0;for(k=w.length;m<k;m++)if(w[m].weightTime>g.weightTime){w.splice(m,0,g);e=!0;break}e||w.push(g)}if(e=l?g:null)for(c in f(e.id),r)r[c].after===e.id&&(a(r[c]),delete r[c])}u?(t=p(),b("enterFrame"),setTimeout(d,0)):b("stop")}function l(a,c){var e,m;if(Array.isArray(a)){y=!0;e=0;for(m=a.length;e<m;e++)l(a[e].id,n(a[e],c));y=!1;u||(t=p(),b("start"),d())}else if("object"===typeof a)if("string"===typeof a.id)l(a.id,a);else{y=!0;for(e in a)"function"===typeof a[e]?l(e,n({job:a[e]},c)):l(e,n(a[e],c));y=
!1;u||(t=p(),b("start"),d())}else if("string"===typeof a){if(g(a))throw Error('[conrad.addJob] Job with id "'+a+'" already exists.');if("function"===typeof c)e={id:a,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:c};else if("object"===typeof c)e=n({id:a,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},c);else throw Error("[conrad.addJob] Wrong arguments.");q[a]=e;b("jobAdded",k(e));u||y||(t=p(),b("start"),d())}else throw Error("[conrad.addJob] Wrong arguments.");
return this}function f(a){var d,c,e,m;m=!1;if(Array.isArray(a))for(d=0,c=a.length;d<c;d++)f(a[d]);else if("string"===typeof a){e=[s,r,q];d=0;for(c=e.length;d<c;d++)a in e[d]&&(m=e[d][a],z.history&&(m.status="done",v.push(m)),b("jobEnded",k(m)),delete e[d][a],"function"===typeof m.end&&m.end(),m=!0);e=w;d=0;for(c=e.length;d<c;d++)if(e[d].id===a){e.splice(d,1);break}if(!m)throw Error('[conrad.killJob] Job "'+a+'" not found.');}else throw Error("[conrad.killJob] Wrong arguments.");return this}function g(a){return(a=
q[a]||s[a]||r[a])?n(a):null}function n(){var a,b,d={};for(a=arguments.length-1;0<=a;a--)for(b in arguments[a])d[b]=arguments[a][b];return d}function k(a){var b,d,c;if(!a)return a;if(Array.isArray(a))for(b=[],d=0,c=a.length;d<c;d++)b.push(k(a[d]));else if("object"===typeof a)for(d in b={},a)b[d]=k(a[d]);else b=a;return b}function m(a){var b,d=[];for(b in a)d.push(a[b]);return d}function p(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw Error("conrad already exists");var t,u=!1,
q={},s={},w=[],r={},v=[],y=!1,z={frameDuration:20,history:!0},x=Object.create(null);Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var A={hasJob:g,addJob:l,killJob:f,killAll:function(){var a,b=n(q,s,r);if(z.history)for(a in b)b[a].status="done",v.push(b[a]),"function"===typeof b[a].end&&b[a].end();q={};r={};s={};w=[];u=!1;return this},settings:function(a,b){var d;if("string"===typeof a1&&1===arguments.length)return z[a1];d="object"===typeof a1&&
1===arguments.length?a1||{}:{};"string"===typeof a1&&(d[a1]=a2);for(var c in d)void 0!==d[c]?z[c]=d[c]:delete z[c];return this},getStats:function(a,b){var d,c,e,l,p,f;if(!arguments.length){l=[];for(c in q)l.push(q[c]);for(c in r)l.push(r[c]);for(c in s)l.push(s[c]);l=l.concat(v)}if("string"===typeof a)switch(a){case "waiting":l=m(r);break;case "running":l=m(s);break;case "done":l=v;break;default:p=a}a instanceof RegExp&&(p=a);!p&&("string"===typeof b||b instanceof RegExp)&&(p=b);if(p){f="string"===
typeof p;if(l instanceof Array)d=l;else if("object"===typeof l)for(c in d=[],l)d=d.concat(l[c]);else{d=[];for(c in q)d.push(q[c]);for(c in r)d.push(r[c]);for(c in s)d.push(s[c]);d=d.concat(v)}l=[];c=0;for(e=d.length;c<e;c++)(f?d[c].id===p:d[c].id.match(p))&&l.push(d[c])}return k(l)},isRunning:function(){return u},clearHistory:function(){v=[];return this},bind:c,unbind:function(a,b){var d,c,e,m,k,l,p=Array.isArray(a)?a:a.split(/ /);if(arguments.length)if(b)for(d=0,c=p.length;d!==c;d+=1){l=p[d];if(x[l]){k=
[];e=0;for(m=x[l].length;e!==m;e+=1)x[l][e].handler!==b&&k.push(x[l][e]);x[l]=k}x[l]&&0===x[l].length&&delete x[l]}else for(d=0,c=p.length;d!==c;d+=1)delete x[p[d]];else x=Object.create(null)},version:"0.1.0"};"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=A),exports.conrad=A);e.conrad=A})(this);var C=this.conrad;(function(e){if("undefined"===typeof f)throw"sigma is not declared";var c=this;f.utils=f.utils||{};f.utils.extend=function(){var b,a,
d={};for(b=arguments.length-1;0<=b;b--)for(a in arguments[b])d[a]=arguments[b][a];return d};f.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()};f.utils.pkg=function(b){return(b||"").split(".").reduce(function(a,b){return b in a?a[b]:a[b]={}},c)};f.utils.id=function(){var b=0;return function(){return++b}}();f.utils.floatColor=function(b){var a=[0,0,0];b.match(/^#/)?(b=(b||"").replace(/^#/,""),a=3===b.length?[parseInt(b.charAt(0)+b.charAt(0),16),parseInt(b.charAt(1)+b.charAt(1),
16),parseInt(b.charAt(2)+b.charAt(2),16)]:[parseInt(b.charAt(0)+b.charAt(1),16),parseInt(b.charAt(2)+b.charAt(3),16),parseInt(b.charAt(4)+b.charAt(5),16)]):b.match(/^ *rgba? *\(/)&&(b=b.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),a=[+b[1],+b[2],+b[3]]);return 65536*a[0]+256*a[1]+a[2]};f.utils.zoomTo=function(b,a,d,c,e){var g=b.settings,g=Math.max(g("zoomMin"),Math.min(g("zoomMax"),b.ratio*c));if(g!==b.ratio)if(c=g/b.ratio,d={x:a*(1-c)+b.x,y:d*(1-c)+b.y,ratio:g},e&&e.duration)a=
f.misc.animation.killAll(b),e=f.utils.extend(e,{easing:a?"quadraticOut":"quadraticInOut"}),f.misc.animation.camera(b,d,e);else if(b.goTo(d),e&&e.onComplete)e.onComplete()};f.utils.getX=function(b){return b.offsetX!==e&&b.offsetX||b.layerX!==e&&b.layerX||b.clientX!==e&&b.clientX};f.utils.getY=function(b){return b.offsetY!==e&&b.offsetY||b.layerY!==e&&b.layerY||b.clientY!==e&&b.clientY};f.utils.getDelta=function(b){return b.wheelDelta!==e&&b.wheelDelta||b.detail!==e&&-b.detail};f.utils.getOffset=function(b){for(var a=
0,d=0;b;)d+=parseInt(b.offsetTop),a+=parseInt(b.offsetLeft),b=b.offsetParent;return{top:d,left:a}};f.utils.doubleClick=function(b,a,d){var c=0,e;b._doubleClickHandler=b._doubleClickHandler||{};b._doubleClickHandler[a]=b._doubleClickHandler[a]||[];e=b._doubleClickHandler[a];e.push(function(a){c++;if(2===c)return c=0,d(a);1===c&&setTimeout(function(){c=0},f.settings.doubleClickTimeout)});b.addEventListener(a,e[e.length-1],!1)};f.utils.unbindDoubleClick=function(b,a){for(var d,c=(b._doubleClickHandler||
{})[a]||[];d=c.pop();)b.removeEventListener(a,d);delete (b._doubleClickHandler||{})[a]};f.utils.easings=f.utils.easings||{};f.utils.easings.linearNone=function(b){return b};f.utils.easings.quadraticIn=function(b){return b*b};f.utils.easings.quadraticOut=function(b){return b*(2-b)};f.utils.easings.quadraticInOut=function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};f.utils.easings.cubicIn=function(b){return b*b*b};f.utils.easings.cubicOut=function(b){return--b*b*b+1};f.utils.easings.cubicInOut=function(b){return 1>
(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};f.utils.loadShader=function(b,a,d,c){d=b.createShader(d);b.shaderSource(d,a);b.compileShader(d);return b.getShaderParameter(d,b.COMPILE_STATUS)?d:(c&&c('Error compiling shader "'+d+'":'+b.getShaderInfoLog(d)),b.deleteShader(d),null)};f.utils.loadProgram=function(b,a,d,c,e){var f=b.createProgram();for(c=0;c<a.length;++c)b.attachShader(f,a[c]);if(d)for(c=0;c<d.length;++c)b.bindAttribLocation(f,locations?locations[c]:c,opt_attribs[c]);b.linkProgram(f);return b.getProgramParameter(f,
b.LINK_STATUS)?f:(e&&e("Error in program linking: "+b.getProgramInfoLog(f)),b.deleteProgram(f),null)};f.utils.pkg("sigma.utils.matrices");f.utils.matrices.translation=function(b,a){return[1,0,0,0,1,0,b,a,1]};f.utils.matrices.rotation=function(b,a){var d=Math.cos(b),c=Math.sin(b);return a?[d,-c,c,d]:[d,-c,0,c,d,0,0,0,1]};f.utils.matrices.scale=function(b,a){return a?[b,0,0,b]:[b,0,0,0,b,0,0,0,1]};f.utils.matrices.multiply=function(b,a,d){var c=d?2:3,e=b[0*c+0],f=b[0*c+1],n=b[0*c+2],k=b[1*c+0],m=b[1*
c+1],p=b[1*c+2],t=b[2*c+0],u=b[2*c+1];b=b[2*c+2];var q=a[0*c+0],s=a[0*c+1],w=a[0*c+2],r=a[1*c+0],v=a[1*c+1],y=a[1*c+2],z=a[2*c+0],x=a[2*c+1];a=a[2*c+2];return d?[e*q+f*r,e*s+f*v,k*q+m*r,k*s+m*v]:[e*q+f*r+n*z,e*s+f*v+n*x,e*w+f*y+n*a,k*q+m*r+p*z,k*s+m*v+p*x,k*w+m*y+p*a,t*q+u*r+b*z,t*s+u*v+b*x,t*w+u*y+b*a]}}).call(this);(function(e){var c,b=0,a=["ms","moz","webkit","o"];for(c=0;c<a.length&&!e.requestAnimationFrame;c++)e.requestAnimationFrame=e[a[c]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[a[c]+
"CancelAnimationFrame"]||e[a[c]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(a,c){var f=(new Date).getTime(),g=Math.max(0,16-(f-b)),n=e.setTimeout(function(){a(f+g)},g);b=f+g;return n});e.cancelAnimationFrame||(e.cancelAnimationFrame=function(a){clearTimeout(a)});Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,
1),c=this,e,f;e=function(){};f=function(){return c.apply(this instanceof e&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e;return f})})(this);if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.settings");f.settings=f.utils.extend(f.settings||{},{clone:!0,immutable:!0,verbose:!1,defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",font:"arial",fontStyle:"",labelColor:"default",
labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",drawLabels:!0,drawEdges:!0,drawNodes:!0,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1E3,
scalingMode:"inside",sideMargin:0,minEdgeSize:0.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:0.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,rescaleIgnoreSize:!1,
skipErrors:!1,nodesPowRatio:0.5,edgesPowRatio:0.5,animationsTime:200});(function(){var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(c,b){var a,d,e,f;if(1===arguments.length&&"object"===typeof arguments[0])for(c in arguments[0])this.bind(c,arguments[0][c]);else if(2===arguments.length&&"function"===typeof arguments[1])for(f="string"===typeof c?c.split(" "):c,a=0,d=f.length;a!==d;a+=1){if(e=f[a])this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push({handler:b})}else throw"bind: Wrong arguments.";
return this};e.prototype.unbind=function(c,b){var a,d,e,f,g,n,k="string"===typeof c?c.split(" "):c;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(b)for(a=0,d=k.length;a!==d;a+=1){n=k[a];if(this._handlers[n]){g=[];e=0;for(f=this._handlers[n].length;e!==f;e+=1)this._handlers[n][e].handler!==b&&g.push(this._handlers[n][e]);this._handlers[n]=g}this._handlers[n]&&0===this._handlers[n].length&&delete this._handlers[n]}else for(a=0,d=k.length;a!==d;a+=1)delete this._handlers[k[a]];
return this};e.prototype.dispatchEvent=function(c,b){var a,d,e,f,g,n,k,m="string"===typeof c?c.split(" "):c;b=void 0===b?{}:b;a=0;for(d=m.length;a!==d;a+=1)if(k=m[a],this._handlers[k]){n=this.getEvent(k,b);g=[];e=0;for(f=this._handlers[k].length;e!==f;e+=1)this._handlers[k][e].handler(n),this._handlers[k][e].one||g.push(this._handlers[k][e]);this._handlers[k]=g}return this};e.prototype.getEvent=function(c,b){return{type:c,data:b||{},target:this}};e.extend=function(c,b){for(var a in e.prototype)e.prototype.hasOwnProperty(a)&&
(c[a]=e.prototype[a]);e.apply(c,b)};"undefined"!==typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}).call(this);(function(){var e=function(){var c,b,a={},d=Array.prototype.slice.call(arguments,0),f=function(e,g){var n,k;if(1===arguments.length&&"string"===typeof e){if(e in a&&void 0!==a[e])return a[e];c=0;for(b=d.length;c<
b;c++)if(e in d[c]&&void 0!==d[c][e])return d[c][e]}else{if("object"===typeof e&&"string"===typeof g)return g in(e||{})?e[g]:f(g);n="object"===typeof e&&void 0===g?e:{};"string"===typeof e&&(n[e]=g);for(k in n)a[k]=n[k];return this}};f.embedObjects=function(){var b=d.concat(a).concat(Array.prototype.splice.call(arguments,0));return e.apply({},b)};c=0;for(b=arguments.length;c<b;c++)f(arguments[c]);return f};"undefined"!==typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=
e):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}).call(this);(function(e){function c(a,b,d){return function(){var c,e;e=d.apply(b,arguments);for(c in h[a])h[a][c].apply(b,arguments);return e}}function b(a){for(var b in a)"hasOwnProperty"in a&&!a.hasOwnProperty(b)||delete a[b];return a}var a=Object.create(null),d=Object.create(null),l=Object.create(null),h=Object.create(null),g={immutable:!0,clone:!0},
n=function(a){return g[a]},k=function(b){var d,e;e={settings:b||n,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(d in l)l[d].call(e);for(d in a)b=c(d,e,a[d]),this[d]=b,e[d]=b};k.addMethod=function(b,d){if("string"!==typeof b||"function"!==
typeof d||2!==arguments.length)throw"addMethod: Wrong arguments.";if(a[b])throw'The method "'+b+'" already exists.';a[b]=d;h[b]=Object.create(null);return this};k.attach=function(a,b,d){if("string"!==typeof a||"string"!==typeof b||"function"!==typeof d||3!==arguments.length)throw"attach: Wrong arguments.";var c;if("constructor"===a)c=l;else{if(!h[a])throw'The method "'+a+'" does not exist.';c=h[a]}if(c[b])throw'A function "'+b+'" is already attached to the method "'+a+'".';c[b]=d;return this};k.addIndex=
function(a,b){if("string"!==typeof a||Object(b)!==b||2!==arguments.length)throw"addIndex: Wrong arguments.";if(d[a])throw'The index "'+a+'" already exists.';var c;d[a]=b;for(c in b){if("function"!==typeof b[c])throw"The bindings must be functions.";k.attach(c,a,b[c])}return this};k.addMethod("addNode",function(a){if(Object(a)!==a||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!==typeof a.id)throw"The node must have a string id.";if(this.nodesIndex[a.id])throw'The node "'+a.id+'" already exists.';
var b,d=a.id,c=Object.create(null);if(this.settings("clone"))for(b in a)"id"!==b&&(c[b]=a[b]);else c=a;this.settings("immutable")?Object.defineProperty(c,"id",{value:d,enumerable:!0}):c.id=d;this.inNeighborsIndex[d]=Object.create(null);this.outNeighborsIndex[d]=Object.create(null);this.allNeighborsIndex[d]=Object.create(null);this.inNeighborsCount[d]=0;this.outNeighborsCount[d]=0;this.allNeighborsCount[d]=0;this.nodesArray.push(c);this.nodesIndex[c.id]=c;return this});k.addMethod("addEdge",function(a){if(Object(a)!==
a||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!==typeof a.id)throw"The edge must have a string id.";if("string"!==typeof a.source||!this.nodesIndex[a.source])throw"The edge source must have an existing node id.";if("string"!==typeof a.target||!this.nodesIndex[a.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[a.id])throw'The edge "'+a.id+'" already exists.';var b,d=Object.create(null);if(this.settings("clone"))for(b in a)"id"!==b&&"source"!==b&&
"target"!==b&&(d[b]=a[b]);else d=a;this.settings("immutable")?(Object.defineProperty(d,"id",{value:a.id,enumerable:!0}),Object.defineProperty(d,"source",{value:a.source,enumerable:!0}),Object.defineProperty(d,"target",{value:a.target,enumerable:!0})):(d.id=a.id,d.source=a.source,d.target=a.target);this.edgesArray.push(d);this.edgesIndex[d.id]=d;this.inNeighborsIndex[a.target][a.source]||(this.inNeighborsIndex[a.target][a.source]=Object.create(null));this.inNeighborsIndex[a.target][a.source][a.id]=
a;this.outNeighborsIndex[a.source][a.target]||(this.outNeighborsIndex[a.source][a.target]=Object.create(null));this.outNeighborsIndex[a.source][a.target][a.id]=a;this.allNeighborsIndex[a.source][a.target]||(this.allNeighborsIndex[a.source][a.target]=Object.create(null));this.allNeighborsIndex[a.source][a.target][a.id]=a;this.allNeighborsIndex[a.target][a.source]||(this.allNeighborsIndex[a.target][a.source]=Object.create(null));this.allNeighborsIndex[a.target][a.source][a.id]=a;this.inNeighborsCount[a.target]++;
this.outNeighborsCount[a.source]++;this.allNeighborsCount[a.target]++;this.allNeighborsCount[a.source]++;return this});k.addMethod("dropNode",function(a){if("string"!==typeof a||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[a])throw'The node "'+a+'" does not exist.';var b,d,c;delete this.nodesIndex[a];b=0;for(c=this.nodesArray.length;b<c;b++)if(this.nodesArray[b].id===a){this.nodesArray.splice(b,1);break}for(b=this.edgesArray.length-1;0<=b;b--)this.edgesArray[b].source!==
a&&this.edgesArray[b].target!==a||this.dropEdge(this.edgesArray[b].id);delete this.inNeighborsIndex[a];delete this.outNeighborsIndex[a];delete this.allNeighborsIndex[a];delete this.inNeighborsCount[a];delete this.outNeighborsCount[a];delete this.allNeighborsCount[a];for(d in this.nodesIndex)delete this.inNeighborsIndex[d][a],delete this.outNeighborsIndex[d][a],delete this.allNeighborsIndex[d][a];return this});k.addMethod("dropEdge",function(a){if("string"!==typeof a||1!==arguments.length)throw"dropEdge: Wrong arguments.";
if(!this.edgesIndex[a])throw'The edge "'+a+'" does not exist.';var b,d,c;c=this.edgesIndex[a];delete this.edgesIndex[a];b=0;for(d=this.edgesArray.length;b<d;b++)if(this.edgesArray[b].id===a){this.edgesArray.splice(b,1);break}delete this.inNeighborsIndex[c.target][c.source][c.id];Object.keys(this.inNeighborsIndex[c.target][c.source]).length||delete this.inNeighborsIndex[c.target][c.source];delete this.outNeighborsIndex[c.source][c.target][c.id];Object.keys(this.outNeighborsIndex[c.source][c.target]).length||
delete this.outNeighborsIndex[c.source][c.target];delete this.allNeighborsIndex[c.source][c.target][c.id];Object.keys(this.allNeighborsIndex[c.source][c.target]).length||delete this.allNeighborsIndex[c.source][c.target];delete this.allNeighborsIndex[c.target][c.source][c.id];Object.keys(this.allNeighborsIndex[c.target][c.source]).length||delete this.allNeighborsIndex[c.target][c.source];this.inNeighborsCount[c.target]--;this.outNeighborsCount[c.source]--;this.allNeighborsCount[c.source]--;this.allNeighborsCount[c.target]--;
return this});k.addMethod("kill",function(){this.nodesArray.length=0;this.edgesArray.length=0;delete this.nodesArray;delete this.edgesArray;delete this.nodesIndex;delete this.edgesIndex;delete this.inNeighborsIndex;delete this.outNeighborsIndex;delete this.allNeighborsIndex;delete this.inNeighborsCount;delete this.outNeighborsCount;delete this.allNeighborsCount});k.addMethod("clear",function(){this.nodesArray.length=0;this.edgesArray.length=0;b(this.nodesIndex);b(this.edgesIndex);b(this.nodesIndex);
b(this.inNeighborsIndex);b(this.outNeighborsIndex);b(this.allNeighborsIndex);b(this.inNeighborsCount);b(this.outNeighborsCount);b(this.allNeighborsCount);return this});k.addMethod("read",function(a){var b,d,c;d=a.nodes||[];b=0;for(c=d.length;b<c;b++)this.addNode(d[b]);d=a.edges||[];b=0;for(c=d.length;b<c;b++)this.addEdge(d[b]);return this});k.addMethod("nodes",function(a){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&"string"===typeof a)return this.nodesIndex[a];if(1===
arguments.length&&"[object Array]"===Object.prototype.toString.call(a)){var b,d,c=[];b=0;for(d=a.length;b<d;b++)if("string"===typeof a[b])c.push(this.nodesIndex[a[b]]);else throw"nodes: Wrong arguments.";return c}throw"nodes: Wrong arguments.";});k.addMethod("degree",function(a,b){b={"in":this.inNeighborsCount,out:this.outNeighborsCount}[b||""]||this.allNeighborsCount;if("string"===typeof a)return b[a];if("[object Array]"===Object.prototype.toString.call(a)){var d,c,e=[];d=0;for(c=a.length;d<c;d++)if("string"===
typeof a[d])e.push(b[a[d]]);else throw"degree: Wrong arguments.";return e}throw"degree: Wrong arguments.";});k.addMethod("edges",function(a){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&"string"===typeof a)return this.edgesIndex[a];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(a)){var b,d,c=[];b=0;for(d=a.length;b<d;b++)if("string"===typeof a[b])c.push(this.edgesIndex[a[b]]);else throw"edges: Wrong arguments.";return c}throw"edges: Wrong arguments.";
});"undefined"!==typeof f?(f.classes=f.classes||Object.create(null),f.classes.graph=k):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=k),exports.graph=k):this.graph=k}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.classes");f.classes.camera=function(c,b,a,d){f.classes.dispatcher.extend(this);Object.defineProperty(this,"graph",{value:b});Object.defineProperty(this,"id",{value:c});Object.defineProperty(this,
"readPrefix",{value:"read_cam"+c+":"});Object.defineProperty(this,"prefix",{value:"cam"+c+":"});this.y=this.x=0;this.ratio=1;this.angle=0;this.isAnimated=!1;this.settings="object"===typeof d&&d?a.embedObject(d):a};f.classes.camera.prototype.goTo=function(c){if(!this.settings("enableCamera"))return this;var b,a=c||{},d=["x","y","ratio","angle"];c=0;for(b=d.length;c<b;c++)if(a[d[c]]!==e){if("number"!==typeof a[d[c]]||isNaN(a[d[c]]))throw'Value for "'+d[c]+'" is not a number.';this[d[c]]=a[d[c]]}this.dispatchEvent("coordinatesUpdated");
return this};f.classes.camera.prototype.applyView=function(c,b,a){a=a||{};b=b!==e?b:this.prefix;c=c!==e?c:this.readPrefix;var d=a.nodes||this.graph.nodes(),f=a.edges||this.graph.edges(),h,g,n,k=Math.cos(this.angle),m=Math.sin(this.angle);h=0;for(g=d.length;h<g;h++)n=d[h],n[b+"x"]=(((n[c+"x"]||0)-this.x)*k+((n[c+"y"]||0)-this.y)*m)/this.ratio+(a.width||0)/2,n[b+"y"]=(((n[c+"y"]||0)-this.y)*k-((n[c+"x"]||0)-this.x)*m)/this.ratio+(a.height||0)/2,n[b+"size"]=(n[c+"size"]||0)/Math.pow(this.ratio,this.settings("nodesPowRatio"));
h=0;for(g=f.length;h<g;h++)f[h][b+"size"]=(f[h][c+"size"]||0)/Math.pow(this.ratio,this.settings("edgesPowRatio"));return this};f.classes.camera.prototype.graphPosition=function(c,b,a){var d=0,e=0,f=Math.cos(this.angle),g=Math.sin(this.angle);a||(d=-(this.x*f+this.y*g)/this.ratio,e=-(this.y*f-this.x*g)/this.ratio);return{x:(c*f+b*g)/this.ratio+d,y:(b*f-c*g)/this.ratio+e}};f.classes.camera.prototype.cameraPosition=function(c,b,a){var d=0,e=0,f=Math.cos(this.angle),g=Math.sin(this.angle);a||(d=-(this.x*
f+this.y*g)/this.ratio,e=-(this.y*f-this.x*g)/this.ratio);return{x:((c-d)*f-(b-e)*g)*this.ratio,y:((b-e)*f+(c-d)*g)*this.ratio}};f.classes.camera.prototype.getMatrix=function(){var c=f.utils.matrices.scale(1/this.ratio),b=f.utils.matrices.rotation(this.angle),a=f.utils.matrices.translation(-this.x,-this.y);return f.utils.matrices.multiply(a,f.utils.matrices.multiply(b,c))};f.classes.camera.prototype.getRectangle=function(c,b){var a=this.cameraPosition(c,0,!0),d=this.cameraPosition(0,b,!0),e=this.cameraPosition(c/
2,b/2,!0),f=this.cameraPosition(c/4,0,!0).x,g=this.cameraPosition(0,b/4,!0).y;return{x1:this.x-e.x-f,y1:this.y-e.y-g,x2:this.x-e.x+f+a.x,y2:this.y-e.y-g+a.y,height:Math.sqrt(Math.pow(d.x,2)+Math.pow(d.y+2*g,2))}}}).call(this);(function(e){function c(a,b){for(var d=[],c=0;4>c;c++)a.x2>=b[c][0].x&&a.x1<=b[c][1].x&&a.y1+a.height>=b[c][0].y&&a.y1<=b[c][2].y&&d.push(c);return d}function b(a,b){for(var d=[],c=0;4>c;c++)g.collision(a,b[c])&&d.push(c);return d}function a(b,d,f){if(f.level<f.maxLevel)for(var l=
c(d,f.corners),g=0,n=l.length;g<n;g++){if(f.nodes[l[g]]===e){var s=f.nodes,w=l[g],r;r=l[g];var v=f,y=v.level+1,z=Math.round(v.bounds.width/2),x=Math.round(v.bounds.height/2),A=Math.round(v.bounds.x),G=Math.round(v.bounds.y),D=void 0,B=void 0;switch(r){case 0:D=A;B=G;break;case 1:D=A+z;B=G;break;case 2:D=A;B=G+x;break;case 3:D=A+z,B=G+x}r=h({x:D,y:B,width:z,height:x},y,v.maxElements,v.maxLevel);s[w]=r}a(b,d,f.nodes[l[g]])}else f.elements.push(b)}function d(a,b){if(b.level<b.maxLevel){var c;c=b.bounds;
var f=a.x<c.x+c.width/2;c=a.y<c.y+c.height/2?f?0:1:f?2:3;return b.nodes[c]!==e?d(a,b.nodes[c]):[]}return b.elements}function f(a,b,c,d){d=d||{};if(b.level<b.maxLevel)for(var g=c(a,b.corners),h=0,n=g.length;h<n;h++)b.nodes[g[h]]!==e&&f(a,b.nodes[g[h]],c,d);else for(a=0,c=b.elements.length;a<c;a++)d[b.elements[a].id]===e&&(d[b.elements[a].id]=b.elements[a]);return d}function h(a,b,d,c){return{level:b||0,bounds:a,corners:g.splitSquare(a),maxElements:d||20,maxLevel:c||4,elements:[],nodes:[]}}var g={pointToSquare:function(a){return{x1:a.x-
a.size,y1:a.y-a.size,x2:a.x+a.size,y2:a.y-a.size,height:2*a.size}},isAxisAligned:function(a){return a.x1===a.x2||a.y1===a.y2},axisAlignedTopPoints:function(a){return a.y1===a.y2&&a.x1<a.x2?a:a.x1===a.x2&&a.y2>a.y1?{x1:a.x1-a.height,y1:a.y1,x2:a.x1,y2:a.y1,height:a.height}:a.x1===a.x2&&a.y2<a.y1?{x1:a.x1,y1:a.y2,x2:a.x2+a.height,y2:a.y2,height:a.height}:{x1:a.x2,y1:a.y1-a.height,x2:a.x1,y2:a.y1-a.height,height:a.height}},lowerLeftCoor:function(a){var b=Math.sqrt(Math.pow(a.x2-a.x1,2)+Math.pow(a.y2-
a.y1,2));return{x:a.x1-(a.y2-a.y1)*a.height/b,y:a.y1+(a.x2-a.x1)*a.height/b}},lowerRightCoor:function(a,b){return{x:b.x-a.x1+a.x2,y:b.y-a.y1+a.y2}},rectangleCorners:function(a){var b=this.lowerLeftCoor(a),d=this.lowerRightCoor(a,b);return[{x:a.x1,y:a.y1},{x:a.x2,y:a.y2},{x:b.x,y:b.y},{x:d.x,y:d.y}]},splitSquare:function(a){return[[{x:a.x,y:a.y},{x:a.x+a.width/2,y:a.y},{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2}],[{x:a.x+a.width/2,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width/2,y:a.y+
a.height/2},{x:a.x+a.width,y:a.y+a.height/2}],[{x:a.x,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x,y:a.y+a.height},{x:a.x+a.width/2,y:a.y+a.height}],[{x:a.x+a.width/2,y:a.y+a.height/2},{x:a.x+a.width,y:a.y+a.height/2},{x:a.x+a.width/2,y:a.y+a.height},{x:a.x+a.width,y:a.y+a.height}]]},axis:function(a,b){return[{x:a[1].x-a[0].x,y:a[1].y-a[0].y},{x:a[1].x-a[3].x,y:a[1].y-a[3].y},{x:b[0].x-b[2].x,y:b[0].y-b[2].y},{x:b[0].x-b[1].x,y:b[0].y-b[1].y}]},projection:function(a,b){var d=(a.x*b.x+
a.y*b.y)/(Math.pow(b.x,2)+Math.pow(b.y,2));return{x:d*b.x,y:d*b.y}},axisCollision:function(a,b,d){for(var c=[],e=[],f=0;4>f;f++){var l=this.projection(b[f],a),g=this.projection(d[f],a);c.push(l.x*a.x+l.y*a.y);e.push(g.x*a.x+g.y*a.y)}a=Math.max.apply(Math,c);b=Math.max.apply(Math,e);c=Math.min.apply(Math,c);return Math.min.apply(Math,e)<=a&&b>=c},collision:function(a,b){for(var d=this.axis(a,b),c=!0,e=0;4>e;e++)c*=this.axisCollision(d[e],a,b);return!!c}},n=function(){this._geom=g;this._tree=null;this._cache=
{query:!1,result:!1}};n.prototype.index=function(b,d){if(!d.bounds)throw"sigma.classes.quad.index: bounds information not given.";var c=d.prefix||"";this._tree=h(d.bounds,0,d.maxElements,d.maxLevel);for(var e=0,f=b.length;e<f;e++)a(b[e],g.pointToSquare({x:b[e][c+"x"],y:b[e][c+"y"],size:b[e][c+"size"]}),this._tree);this._cache={query:!1,result:!1};return this._tree};n.prototype.point=function(a,b){return this._tree?d({x:a,y:b},this._tree)||[]:[]};n.prototype.area=function(a){var d=JSON.stringify(a),
e;if(this._cache.query===d)return this._cache.result;g.isAxisAligned(a)?(e=c,a=g.axisAlignedTopPoints(a)):(e=b,a=g.rectangleCorners(a));e=this._tree?f(a,this._tree,e):[];a=[];for(var h in e)a.push(e[h]);this._cache.query=d;return this._cache.result=a};"undefined"!==typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=n):"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=n),exports.quad=n):this.quad=n}).call(this);(function(e){if("undefined"===
typeof f)throw"sigma is not declared";f.utils.pkg("sigma.captors");f.captors.mouse=function(c,b,a){function d(a){var b,d;t("mouseEnabled")&&m.dispatchEvent("mousemove",{x:f.utils.getX(a)-a.target.width/2,y:f.utils.getY(a)-a.target.height/2});if(t("mouseEnabled")&&y){z=!0;x&&clearTimeout(x);x=setTimeout(function(){z=!1},t("dragTimeout"));f.misc.animation.killAll(p);p.isMoving=!0;d=p.cameraPosition(f.utils.getX(a)-r,f.utils.getY(a)-v,!0);b=u-d.x;d=q-d.y;if(b!==p.x||d!==p.y)s=p.x,w=p.y,p.goTo({x:b,y:d});
a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation();return!1}}function e(a){if(t("mouseEnabled")&&y){y=!1;x&&clearTimeout(x);p.isMoving=!1;var b=f.utils.getX(a),d=f.utils.getY(a);z?(f.misc.animation.killAll(p),f.misc.animation.camera(p,{x:p.x+t("mouseInertiaRatio")*(p.x-s),y:p.y+t("mouseInertiaRatio")*(p.y-w)},{easing:"quadraticOut",duration:t("mouseInertiaDuration")})):r===b&&v===d||p.goTo({x:p.x,y:p.y});m.dispatchEvent("mouseup",{x:b-a.target.width/2,y:d-a.target.height/2});
z=!1}}function h(a){t("mouseEnabled")&&(y=!0,u=p.x,q=p.y,s=p.x,w=p.y,r=f.utils.getX(a),v=f.utils.getY(a),m.dispatchEvent("mouseup",{x:r-a.target.width/2,y:v-a.target.height/2}))}function g(a){t("mouseEnabled")&&m.dispatchEvent("mouseout")}function n(a){t("mouseEnabled")&&m.dispatchEvent("click",{x:f.utils.getX(a)-a.target.width/2,y:f.utils.getY(a)-a.target.height/2});a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation();return!1}function k(a){var b,d,c;if(t("mouseEnabled"))return d=
0<f.utils.getDelta(a)?1/t("zoomingRatio"):t("zoomingRatio"),b=p.cameraPosition(f.utils.getX(a)-a.target.width/2,f.utils.getY(a)-a.target.height/2,!0),c={duration:t("mouseZoomDuration")},f.utils.zoomTo(p,b.x,b.y,d,c),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1}var m=this,p=b,t=a,u,q,s,w,r,v,y,z,x;f.classes.dispatcher.extend(this);f.utils.doubleClick(c,"click",function(a){var b,d,c;if(t("mouseEnabled"))return d=1/t("doubleClickZoomingRatio"),m.dispatchEvent("doubleclick",
{x:r-a.target.width/2,y:v-a.target.height/2}),t("doubleClickEnabled")&&(b=p.cameraPosition(f.utils.getX(a)-a.target.width/2,f.utils.getY(a)-a.target.height/2,!0),c={duration:t("doubleClickZoomDuration")},f.utils.zoomTo(p,b.x,b.y,d,c)),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1});c.addEventListener("DOMMouseScroll",k,!1);c.addEventListener("mousewheel",k,!1);c.addEventListener("mousemove",d,!1);c.addEventListener("mousedown",h,!1);c.addEventListener("click",n,!1);c.addEventListener("mouseout",
g,!1);document.addEventListener("mouseup",e,!1);this.kill=function(){f.utils.unbindDoubleClick(c,"click");c.removeEventListener("DOMMouseScroll",k);c.removeEventListener("mousewheel",k);c.removeEventListener("mousemove",d);c.removeEventListener("mousedown",h);c.removeEventListener("click",n);c.removeEventListener("mouseout",g);document.removeEventListener("mouseup",e)}}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.captors");f.captors.touch=function(c,
b,a){function d(a){var b=f.utils.getOffset(k);return{x:a.pageX-b.left,y:a.pageY-b.top}}function e(a){if(p("touchEnabled")){var b,c,f,l;v=a.touches;switch(v.length){case 1:m.isMoving=!0;B=1;t=m.x;u=m.y;w=m.x;r=m.y;c=d(v[0]);y=c.x;z=c.y;break;case 2:return m.isMoving=!0,B=2,c=d(v[0]),l=d(v[1]),b=c.x,f=c.y,c=l.x,l=l.y,w=m.x,r=m.y,q=m.angle,s=m.ratio,t=m.x,u=m.y,y=b,z=f,x=c,A=l,C=Math.atan2(A-z,x-y),D=Math.sqrt(Math.pow(A-z,2)+Math.pow(x-y,2)),a.preventDefault(),!1}}}function h(a){if(p("touchEnabled")){v=
a.touches;var b=p("touchInertiaRatio");F&&(E=!1,clearTimeout(F));switch(B){case 2:if(1===a.touches.length){e(a);a.preventDefault();break}case 1:m.isMoving=!1,n.dispatchEvent("stopDrag"),E&&(H=!1,f.misc.animation.camera(m,{x:m.x+b*(m.x-w),y:m.y+b*(m.y-r)},{easing:"quadraticOut",duration:p("touchInertiaDuration")})),E=!1,B=0}}}function g(a){if(!H&&p("touchEnabled")){var b,c,e,f,l,g,k,h;v=a.touches;E=!0;F&&clearTimeout(F);F=setTimeout(function(){E=!1},p("dragTimeout"));switch(B){case 1:k=d(v[0]);b=k.x;
e=k.y;e=m.cameraPosition(b-y,e-z,!0);b=t-e.x;e=u-e.y;if(b!==m.x||e!==m.y)w=m.x,r=m.y,m.goTo({x:b,y:e}),n.dispatchEvent("mousemove",{x:k.x-a.target.width/2,y:k.y-a.target.height/2}),n.dispatchEvent("drag");break;case 2:if(k=d(v[0]),f=d(v[1]),b=k.x,e=k.y,c=f.x,f=f.y,h=m.cameraPosition((y+x)/2-a.target.width/2,(z+A)/2-a.target.height/2,!0),k=m.cameraPosition((b+c)/2-a.target.width/2,(e+f)/2-a.target.height/2,!0),g=Math.atan2(f-e,c-b)-C,f=Math.sqrt(Math.pow(f-e,2)+Math.pow(c-b,2))/D,b=h.x,e=h.y,c=s/f,
b*=f,e*=f,h=q-g,l=Math.cos(-g),g=Math.sin(-g),f=e*l-b*g,b=b*l+e*g,b=b-k.x+t,e=f-k.y+u,c!==m.ratio||h!==m.angle||b!==m.x||e!==m.y)w=m.x,r=m.y,m.goTo({x:b,y:e,angle:h,ratio:c}),n.dispatchEvent("drag")}a.preventDefault();return!1}}var n=this,k=c,m=b,p=a,t,u,q,s,w,r,v=[],y,z,x,A,C,D,B,E,H,F;f.classes.dispatcher.extend(this);f.utils.doubleClick(k,"touchstart",function(a){var b,c,e;if(a.touches&&1===a.touches.length&&p("touchEnabled"))return H=!0,c=1/p("doubleClickZoomingRatio"),b=d(a.touches[0]),n.dispatchEvent("doubleclick",
{x:b.x-a.target.width/2,y:b.y-a.target.height/2}),p("doubleClickEnabled")&&(b=m.cameraPosition(b.x-a.target.width/2,b.y-a.target.height/2,!0),e={duration:p("doubleClickZoomDuration"),onComplete:function(){H=!1}},f.utils.zoomTo(m,b.x,b.y,c,e)),a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation(),!1});k.addEventListener("touchstart",e,!1);k.addEventListener("touchend",h,!1);k.addEventListener("touchcancel",h,!1);k.addEventListener("touchleave",h,!1);k.addEventListener("touchmove",
g,!1);this.kill=function(){f.utils.unbindDoubleClick(k,"touchstart");k.addEventListener("touchstart",e);k.addEventListener("touchend",h);k.addEventListener("touchcancel",h);k.addEventListener("touchleave",h);k.addEventListener("touchmove",g)}}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";if("undefined"===typeof C)throw"conrad is not declared";f.utils.pkg("sigma.renderers");f.renderers.canvas=function(c,b,a,d){if("object"!==typeof d)throw"sigma.renderers.canvas: Wrong arguments.";
if(!(d.container instanceof HTMLElement))throw"Container not found.";f.classes.dispatcher.extend(this);Object.defineProperty(this,"conradId",{value:f.utils.id()});this.graph=c;this.camera=b;this.contexts={};this.domElements={};this.options=d;this.container=this.options.container;this.settings="object"===typeof d.settings&&d.settings?a.embedObjects(d.settings):a;this.nodesOnScreen=[];this.edgesOnScreen=[];this.jobs={};this.options.prefix="renderer"+this.conradId+":";this.settings("batchEdgesDrawing")?
(this.initDOM("canvas","edges"),this.initDOM("canvas","scene")):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene);this.contexts.nodes=this.contexts.scene;this.contexts.labels=this.contexts.scene;this.initDOM("canvas","mouse");this.contexts.hover=this.contexts.mouse;this.captors=[];a=this.options.captors||[f.captors.mouse,f.captors.touch];c=0;for(b=a.length;c<b;c++)d="function"===typeof a[c]?a[c]:f.captors[a[c]],this.captors.push(new d(this.domElements.mouse,this.camera,this.settings));
window.addEventListener("resize",this.boundResize=this.resize.bind(this),!1);f.misc.bindEvents.call(this,this.options.prefix);f.misc.drawHovers.call(this,this.options.prefix);this.resize(!1)};f.renderers.canvas.prototype.render=function(c){c=c||{};var b,a,d,l,h,g,n,k,m,p,t,u={},q=this.graph,s=this.graph.nodes,w=this.settings(c,"drawEdges"),r=this.settings(c,"drawNodes"),v=this.settings(c,"drawLabels"),y=this.settings.embedObjects(c,{prefix:this.options.prefix});this.settings(c,"hideEdgesOnMove")&&
(this.camera.isAnimated||this.camera.isMoving)&&(w=!1);this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height});this.clear();for(b in this.jobs)C.hasJob(b)&&C.killJob(b);this.edgesOnScreen=[];b=this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height));a=0;for(d=b.length;a<d;a++)u[b[a].id]=b[a];if(w){b=q.edges();a=0;for(d=b.length;a<d;a++)l=b[a],!u[l.source]&&!u[l.target]||l.hidden||s(l.source).hidden||s(l.target).hidden||this.edgesOnScreen.push(l);
if(this.settings(c,"batchEdgesDrawing"))h="edges_"+this.conradId,p=y("canvasEdgesBatchSize"),k=this.edgesOnScreen,d=k.length,n=0,g=Math.min(k.length,n+p),c=function(){t=this.contexts.edges.globalCompositeOperation;this.contexts.edges.globalCompositeOperation="destination-over";m=f.canvas.edges;for(a=n;a<g;a++)l=k[a],(m[l.type]||m.def)(l,q.nodes(l.source),q.nodes(l.target),this.contexts.edges,y);this.contexts.edges.globalCompositeOperation=t;if(g===k.length)return delete this.jobs[h],!1;n=g+1;g=Math.min(k.length,
n+p);return!0},this.jobs[h]=c,C.addJob(h,c.bind(this));else for(m=f.canvas.edges,b=this.edgesOnScreen,a=0,d=b.length;a<d;a++)l=b[a],(m[l.type]||m.def)(l,q.nodes(l.source),q.nodes(l.target),this.contexts.edges,y)}if(r)for(m=f.canvas.nodes,b=this.nodesOnScreen,a=0,d=b.length;a<d;a++)b[a].hidden||(m[b[a].type]||m.def)(b[a],this.contexts.nodes,y);if(v)for(m=f.canvas.labels,b=this.nodesOnScreen,a=0,d=b.length;a<d;a++)b[a].hidden||(m[b[a].type]||m.def)(b[a],this.contexts.labels,y);this.dispatchEvent("render");
return this};f.renderers.canvas.prototype.initDOM=function(c,b){var a=document.createElement(c);a.style.position="absolute";a.setAttribute("class","sigma-"+b);this.domElements[b]=a;this.container.appendChild(a);"canvas"===c.toLowerCase()&&(this.contexts[b]=a.getContext("2d"))};f.renderers.canvas.prototype.resize=function(c,b){var a,d=this.width,f=this.height;c!==e&&b!==e?(this.width=c,this.height=b):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,c=this.width,b=this.height);
if(d!==this.width||f!==this.height)for(a in this.domElements)this.domElements[a].style.width=c+"px",this.domElements[a].style.height=b+"px","canvas"===this.domElements[a].tagName.toLowerCase()&&(this.domElements[a].setAttribute("width",1*c+"px"),this.domElements[a].setAttribute("height",1*b+"px"));return this};f.renderers.canvas.prototype.clear=function(){for(var c in this.domElements)"CANVAS"===this.domElements[c].tagName&&(this.domElements[c].width=this.domElements[c].width);return this};f.renderers.canvas.prototype.kill=
function(){var c,b;for(window.removeEventListener("resize",this.boundResize);b=this.captors.pop();)b.kill();delete this.captors;for(c in this.domElements)this.domElements[c].parentNode.removeChild(this.domElements[c]),delete this.domElements[c],delete this.contexts[c];delete this.domElements;delete this.contexts};f.utils.pkg("sigma.canvas.nodes");f.utils.pkg("sigma.canvas.edges");f.utils.pkg("sigma.canvas.labels")}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.renderers");
f.renderers.webgl=function(c,b,a,d){if("object"!==typeof d)throw"sigma.renderers.webgl: Wrong arguments.";if(!(d.container instanceof HTMLElement))throw"Container not found.";f.classes.dispatcher.extend(this);this.jobs={};Object.defineProperty(this,"conradId",{value:f.utils.id()});this.graph=c;this.camera=b;this.contexts={};this.domElements={};this.options=d;this.container=this.options.container;this.settings="object"===typeof d.settings&&d.settings?a.embedObjects(d.settings):a;this.options.prefix=
this.camera.readPrefix;Object.defineProperty(this,"nodePrograms",{value:{}});Object.defineProperty(this,"edgePrograms",{value:{}});Object.defineProperty(this,"nodeFloatArrays",{value:{}});Object.defineProperty(this,"edgeFloatArrays",{value:{}});this.settings(d,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene);this.initDOM("canvas","labels");this.initDOM("canvas",
"mouse");this.contexts.hover=this.contexts.mouse;this.captors=[];a=this.options.captors||[f.captors.mouse,f.captors.touch];c=0;for(b=a.length;c<b;c++)d="function"===typeof a[c]?a[c]:f.captors[a[c]],this.captors.push(new d(this.domElements.mouse,this.camera,this.settings));window.addEventListener("resize",this.boundResize=this.resize.bind(this),!1);f.misc.bindEvents.call(this,this.camera.prefix);f.misc.drawHovers.call(this,this.camera.prefix);this.resize()};f.renderers.webgl.prototype.process=function(){var c,
b,a,d,e,h=this.graph,g=f.utils.extend(g,this.options);for(d in this.nodeFloatArrays)delete this.nodeFloatArrays[d];for(d in this.edgeFloatArrays)delete this.edgeFloatArrays[d];c=h.edges();b=0;for(a=c.length;b<a;b++)d=c[b].type&&f.webgl.edges[c[b].type]?c[b].type:"def",this.edgeFloatArrays[d]||(this.edgeFloatArrays[d]={edges:[]}),this.edgeFloatArrays[d].edges.push(c[b]);c=h.nodes();b=0;for(a=c.length;b<a;b++)d=c[b].type&&f.webgl.nodes[c[b].type]?d:"def",this.nodeFloatArrays[d]||(this.nodeFloatArrays[d]=
{nodes:[]}),this.nodeFloatArrays[d].nodes.push(c[b]);for(d in this.edgeFloatArrays)for(e=f.webgl.edges[d],c=this.edgeFloatArrays[d].edges,b=0,a=c.length;b<a;b++)this.edgeFloatArrays[d].array||(this.edgeFloatArrays[d].array=new Float32Array(c.length*e.POINTS*e.ATTRIBUTES)),c[b].hidden||h.nodes(c[b].source).hidden||h.nodes(c[b].target).hidden||e.addEdge(c[b],h.nodes(c[b].source),h.nodes(c[b].target),this.edgeFloatArrays[d].array,b*e.POINTS*e.ATTRIBUTES,g.prefix,this.settings);for(d in this.nodeFloatArrays)for(e=
f.webgl.nodes[d],c=this.nodeFloatArrays[d].nodes,b=0,a=c.length;b<a;b++)this.nodeFloatArrays[d].array||(this.nodeFloatArrays[d].array=new Float32Array(c.length*e.POINTS*e.ATTRIBUTES)),c[b].hidden||e.addNode(c[b],this.nodeFloatArrays[d].array,b*e.POINTS*e.ATTRIBUTES,g.prefix,this.settings);return this};f.renderers.webgl.prototype.render=function(c){var b,a,d,l,h=this;a=this.contexts.nodes;var g=this.contexts.edges,n=this.camera.getMatrix(),k=f.utils.extend(c,this.options);c=this.settings(k,"drawLabels");
l=this.settings(k,"drawEdges");d=this.settings(k,"drawNodes");this.settings(k,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(l=!1);this.clear();n=f.utils.matrices.multiply(n,f.utils.matrices.translation(this.width/2,this.height/2));for(b in this.jobs)C.hasJob(b)&&C.killJob(b);if(l)if(this.settings(k,"batchEdgesDrawing"))(function(){var a,b,c,d,e,l,h,r,v;c="edges_"+this.conradId;v=this.settings(k,"webglEdgesBatchSize");a=Object.keys(this.edgeFloatArrays);a.length&&(b=0,r=f.webgl.edges[a[b]],
e=this.edgeFloatArrays[a[b]].array,h=0,l=Math.min(h+v*r.POINTS,e.length/r.ATTRIBUTES),d=function(){this.edgePrograms[a[b]]||(this.edgePrograms[a[b]]=r.initProgram(g));h<l&&(g.useProgram(this.edgePrograms[a[b]]),r.render(g,this.edgePrograms[a[b]],e,{settings:this.settings,matrix:n,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings("webglOversamplingRatio"),start:h,count:l-h}));if(l>=e.length/r.ATTRIBUTES&&b===a.length-1)return delete this.jobs[c],!1;l>=e.length/
r.ATTRIBUTES?(b++,e=this.edgeFloatArrays[a[b]].array,r=f.webgl.edges[a[b]],h=0):h=l;l=Math.min(h+v*r.POINTS,e.length/r.ATTRIBUTES);return!0},this.jobs[c]=d,C.addJob(c,d.bind(this)))}).call(this);else for(b in this.edgeFloatArrays)l=f.webgl.edges[b],this.edgePrograms[b]||(this.edgePrograms[b]=l.initProgram(g)),this.edgeFloatArrays[b]&&(g.useProgram(this.edgePrograms[b]),l.render(g,this.edgePrograms[b],this.edgeFloatArrays[b].array,{settings:this.settings,matrix:n,width:this.width,height:this.height,
ratio:this.camera.ratio,scalingRatio:this.settings("webglOversamplingRatio")}));if(d)for(b in a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),a.enable(a.BLEND),this.nodeFloatArrays)l=f.webgl.nodes[b],this.nodePrograms[b]||(this.nodePrograms[b]=l.initProgram(a)),this.nodeFloatArrays[b]&&(a.useProgram(this.nodePrograms[b]),l.render(a,this.nodePrograms[b],this.nodeFloatArrays[b].array,{settings:this.settings,matrix:n,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings("webglOversamplingRatio")}));
if(c)for(b=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:b,edges:[],width:this.width,height:this.height}),d=function(a){return h.settings({prefix:h.camera.prefix},a)},a=0,c=b.length;a<c;a++)b[a].hidden||(f.canvas.labels[b[a].type]||f.canvas.labels.def)(b[a],this.contexts.labels,d);this.dispatchEvent("render");return this};f.renderers.webgl.prototype.initDOM=function(c,b,a){var d=document.createElement(c);d.style.position="absolute";d.setAttribute("class",
"sigma-"+b);this.domElements[b]=d;this.container.appendChild(d);"canvas"===c.toLowerCase()&&(this.contexts[b]=d.getContext(a?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}))};f.renderers.webgl.prototype.resize=function(c,b){var a,d=this.width,f=this.height;c!==e&&b!==e?(this.width=c,this.height=b):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,c=this.width,b=this.height);if(d!==this.width||f!==this.height)for(a in this.domElements)this.domElements[a].style.width=
c+"px",this.domElements[a].style.height=b+"px","canvas"===this.domElements[a].tagName.toLowerCase()&&(this.contexts[a]&&this.contexts[a].scale?(this.domElements[a].setAttribute("width",c+"px"),this.domElements[a].setAttribute("height",b+"px")):(this.domElements[a].setAttribute("width",c*this.settings("webglOversamplingRatio")+"px"),this.domElements[a].setAttribute("height",b*this.settings("webglOversamplingRatio")+"px")));for(a in this.contexts)this.contexts[a]&&this.contexts[a].viewport&&this.contexts[a].viewport(0,
0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this};f.renderers.webgl.prototype.clear=function(){for(var c in this.domElements)"CANVAS"===this.domElements[c].tagName&&(this.domElements[c].width=this.domElements[c].width);this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT);this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT);return this};f.renderers.webgl.prototype.kill=function(){var c,b;for(window.removeEventListener("resize",
this.boundResize);b=this.captors.pop();)b.kill();delete this.captors;for(c in this.domElements)this.domElements[c].parentNode.removeChild(this.domElements[c]),delete this.domElements[c],delete this.contexts[c];delete this.domElements;delete this.contexts};f.utils.pkg("sigma.webgl.nodes");f.utils.pkg("sigma.webgl.edges");f.utils.pkg("sigma.canvas.labels")}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.renderers");var c=!!e.WebGLRenderingContext;
if(c){e=document.createElement("canvas");try{c=!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(b){c=!1}}f.renderers.def=c?f.renderers.webgl:f.renderers.canvas})(this);(function(){f.utils.pkg("sigma.webgl.nodes");f.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,c,b,a,d){d=f.utils.floatColor(e.color||d("defaultNodeColor"));c[b++]=e[a+"x"];c[b++]=e[a+"y"];c[b++]=e[a+"size"];c[b++]=d;c[b++]=0;c[b++]=e[a+"x"];c[b++]=e[a+"y"];c[b++]=e[a+"size"];c[b++]=d;c[b++]=2*Math.PI/
3;c[b++]=e[a+"x"];c[b++]=e[a+"y"];c[b++]=e[a+"size"];c[b++]=d;c[b++]=4*Math.PI/3},render:function(e,c,b,a){var d=e.getAttribLocation(c,"a_position"),f=e.getAttribLocation(c,"a_size"),h=e.getAttribLocation(c,"a_color"),g=e.getAttribLocation(c,"a_angle"),n=e.getUniformLocation(c,"u_resolution"),k=e.getUniformLocation(c,"u_matrix"),m=e.getUniformLocation(c,"u_ratio"),p=e.getUniformLocation(c,"u_scale");c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);e.bufferData(e.ARRAY_BUFFER,b,e.DYNAMIC_DRAW);e.uniform2f(n,
a.width,a.height);e.uniform1f(m,1/Math.pow(a.ratio,a.settings("nodesPowRatio")));e.uniform1f(p,a.scalingRatio);e.uniformMatrix3fv(k,!1,a.matrix);e.enableVertexAttribArray(d);e.enableVertexAttribArray(f);e.enableVertexAttribArray(h);e.enableVertexAttribArray(g);e.vertexAttribPointer(d,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,
12);e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);e.drawArrays(e.TRIANGLES,a.start||0,a.count||b.length/this.ATTRIBUTES)},initProgram:function(e){var c,b;c=f.utils.loadShader(e,"attribute vec2 a_position;\nattribute float a_size;\nattribute float a_color;\nattribute float a_angle;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\nvoid main() {\nradius = a_size * u_ratio;\nvec2 position = (u_matrix * vec3(a_position, 1)).xy;\ncenter = position * u_scale;\ncenter = vec2(center.x, u_scale * u_resolution.y - center.y);\nposition = position +\n2.0 * radius * vec2(cos(a_angle), sin(a_angle));\nposition = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\nradius = radius * u_scale;\ngl_Position = vec4(position, 0, 1);\nfloat c = a_color;\ncolor.b = mod(c, 256.0); c = floor(c / 256.0);\ncolor.g = mod(c, 256.0); c = floor(c / 256.0);\ncolor.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\ncolor.a = 1.0;\n}",
e.VERTEX_SHADER);b=f.utils.loadShader(e,"precision mediump float;\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\nvoid main(void) {\nvec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\nvec2 m = gl_FragCoord.xy - center;\nfloat diff = radius - sqrt(m.x * m.x + m.y * m.y);\nif (diff > 0.0)\ngl_FragColor = color;\nelse\ngl_FragColor = color0;\n}",e.FRAGMENT_SHADER);return f.utils.loadProgram(e,[c,b])}}})();(function(){f.utils.pkg("sigma.webgl.nodes");f.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,
addNode:function(e,c,b,a,d){c[b++]=e[a+"x"];c[b++]=e[a+"y"];c[b++]=e[a+"size"];c[b++]=f.utils.floatColor(e.color||d("defaultNodeColor"))},render:function(e,c,b,a){var d=e.getAttribLocation(c,"a_position"),f=e.getAttribLocation(c,"a_size"),h=e.getAttribLocation(c,"a_color"),g=e.getUniformLocation(c,"u_resolution"),n=e.getUniformLocation(c,"u_matrix"),k=e.getUniformLocation(c,"u_ratio"),m=e.getUniformLocation(c,"u_scale");c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);e.bufferData(e.ARRAY_BUFFER,
b,e.DYNAMIC_DRAW);e.uniform2f(g,a.width,a.height);e.uniform1f(k,1/Math.pow(a.ratio,a.settings("nodesPowRatio")));e.uniform1f(m,a.scalingRatio);e.uniformMatrix3fv(n,!1,a.matrix);e.enableVertexAttribArray(d);e.enableVertexAttribArray(f);e.enableVertexAttribArray(h);e.vertexAttribPointer(d,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);e.vertexAttribPointer(f,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,
12);e.drawArrays(e.POINTS,a.start||0,a.count||b.length/this.ATTRIBUTES)},initProgram:function(e){var c,b;c=f.utils.loadShader(e,"attribute vec2 a_position;\nattribute float a_size;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\nvarying vec4 color;\nvoid main() {\ngl_Position = vec4(\n((u_matrix * vec3(a_position, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\ngl_PointSize = a_size * u_ratio * u_scale * 2.0;\nfloat c = a_color;\ncolor.b = mod(c, 256.0); c = floor(c / 256.0);\ncolor.g = mod(c, 256.0); c = floor(c / 256.0);\ncolor.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\ncolor.a = 1.0;\n}",
e.VERTEX_SHADER);b=f.utils.loadShader(e,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor = color;\n}",e.FRAGMENT_SHADER);return f.utils.loadProgram(e,[c,b])}}})();(function(){f.utils.pkg("sigma.webgl.edges");f.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,c,b,a,d,l,h){var g=(e[l+"size"]||1)/2,n=c[l+"x"],k=c[l+"y"],m=b[l+"x"];l=b[l+"y"];e=e.color;if(!e)switch(h("edgeColor")){case "source":e=c.color||h("defaultNodeColor");break;case "target":e=b.color||h("defaultNodeColor");
break;default:e=h("defaultEdgeColor")}e=f.utils.floatColor(e);a[d++]=n;a[d++]=k;a[d++]=m;a[d++]=l;a[d++]=g;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=l;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=1;a[d++]=e;a[d++]=m;a[d++]=l;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=l;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=0;a[d++]=e;a[d++]=n;a[d++]=k;a[d++]=m;a[d++]=l;a[d++]=g;a[d++]=1;a[d++]=e;a[d++]=n;a[d++]=k;a[d++]=m;a[d++]=l;a[d++]=g;a[d++]=0;a[d++]=e},render:function(e,c,b,a){var d=e.getAttribLocation(c,"a_color"),
l=e.getAttribLocation(c,"a_position1"),h=e.getAttribLocation(c,"a_position2"),g=e.getAttribLocation(c,"a_thickness"),n=e.getAttribLocation(c,"a_minus"),k=e.getUniformLocation(c,"u_resolution"),m=e.getUniformLocation(c,"u_matrix"),p=e.getUniformLocation(c,"u_matrixHalfPi"),t=e.getUniformLocation(c,"u_matrixHalfPiMinus"),u=e.getUniformLocation(c,"u_ratio"),q=e.getUniformLocation(c,"u_scale");c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);e.bufferData(e.ARRAY_BUFFER,b,e.STATIC_DRAW);e.uniform2f(k,
a.width,a.height);e.uniform1f(u,a.ratio/Math.pow(a.ratio,a.settings("edgesPowRatio")));e.uniform1f(q,a.scalingRatio);e.uniformMatrix3fv(m,!1,a.matrix);e.uniformMatrix2fv(p,!1,f.utils.matrices.rotation(Math.PI/2,!0));e.uniformMatrix2fv(t,!1,f.utils.matrices.rotation(-Math.PI/2,!0));e.enableVertexAttribArray(d);e.enableVertexAttribArray(l);e.enableVertexAttribArray(h);e.enableVertexAttribArray(g);e.enableVertexAttribArray(n);e.vertexAttribPointer(l,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,
0);e.vertexAttribPointer(h,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);e.drawArrays(e.TRIANGLES,a.start||0,a.count||b.length/this.ATTRIBUTES)},initProgram:function(e){var c,b;c=f.utils.loadShader(e,"attribute vec2 a_position1;\nattribute vec2 a_position2;\nattribute float a_thickness;\nattribute float a_minus;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\nuniform mat2 u_matrixHalfPi;\nuniform mat2 u_matrixHalfPiMinus;\nvarying vec4 color;\nvoid main() {\nvec2 position = a_thickness * u_ratio *\nnormalize(a_position2 - a_position1);\nmat2 matrix = a_minus * u_matrixHalfPiMinus +\n(1.0 - a_minus) * u_matrixHalfPi;\nposition = matrix * position + a_position1;\ngl_Position = vec4(\n((u_matrix * vec3(position, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\nfloat c = a_color;\ncolor.b = mod(c, 256.0); c = floor(c / 256.0);\ncolor.g = mod(c, 256.0); c = floor(c / 256.0);\ncolor.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\ncolor.a = 1.0;\n}",
e.VERTEX_SHADER);b=f.utils.loadShader(e,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor = color;\n}",e.FRAGMENT_SHADER);return f.utils.loadProgram(e,[c,b])}}})();(function(){f.utils.pkg("sigma.webgl.edges");f.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,c,b,a,d,l,h){var g=c[l+"x"],n=c[l+"y"],k=b[l+"x"];l=b[l+"y"];e=e.color;if(!e)switch(h("edgeColor")){case "source":e=c.color||h("defaultNodeColor");break;case "target":e=b.color||h("defaultNodeColor");break;
default:e=h("defaultEdgeColor")}e=f.utils.floatColor(e);a[d++]=g;a[d++]=n;a[d++]=e;a[d++]=k;a[d++]=l;a[d++]=e},render:function(e,c,b,a){var d=e.getAttribLocation(c,"a_color"),f=e.getAttribLocation(c,"a_position"),h=e.getUniformLocation(c,"u_resolution"),g=e.getUniformLocation(c,"u_matrix");c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);e.bufferData(e.ARRAY_BUFFER,b,e.DYNAMIC_DRAW);e.uniform2f(h,a.width,a.height);e.uniformMatrix3fv(g,!1,a.matrix);e.enableVertexAttribArray(f);e.enableVertexAttribArray(d);
e.vertexAttribPointer(f,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);e.lineWidth(3);e.drawArrays(e.LINES,a.start||0,a.count||b.length/this.ATTRIBUTES)},initProgram:function(e){var c,b;c=f.utils.loadShader(e,"attribute vec2 a_position;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform mat3 u_matrix;\nvarying vec4 color;\nvoid main() {\ngl_Position = vec4(\n((u_matrix * vec3(a_position, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\nfloat c = a_color;\ncolor.b = mod(c, 256.0); c = floor(c / 256.0);\ncolor.g = mod(c, 256.0); c = floor(c / 256.0);\ncolor.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\ncolor.a = 1.0;\n}",
e.VERTEX_SHADER);b=f.utils.loadShader(e,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor = color;\n}",e.FRAGMENT_SHADER);return f.utils.loadProgram(e,[c,b])}}})();(function(){f.utils.pkg("sigma.webgl.edges");f.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,c,b,a,d,l,h){var g=(e[l+"size"]||1)/2,n=c[l+"x"],k=c[l+"y"],m=b[l+"x"],p=b[l+"y"];l=b[l+"size"];e=e.color;if(!e)switch(h("edgeColor")){case "source":e=c.color||h("defaultNodeColor");break;case "target":e=
b.color||h("defaultNodeColor");break;default:e=h("defaultEdgeColor")}e=f.utils.floatColor(e);a[d++]=n;a[d++]=k;a[d++]=m;a[d++]=p;a[d++]=g;a[d++]=l;a[d++]=0;a[d++]=0;a[d++]=0;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=p;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=l;a[d++]=1;a[d++]=1;a[d++]=0;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=p;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=l;a[d++]=1;a[d++]=0;a[d++]=0;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=p;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=l;a[d++]=1;a[d++]=0;a[d++]=0;a[d++]=0;a[d++]=e;a[d++]=n;a[d++]=
k;a[d++]=m;a[d++]=p;a[d++]=g;a[d++]=l;a[d++]=0;a[d++]=1;a[d++]=0;a[d++]=0;a[d++]=e;a[d++]=n;a[d++]=k;a[d++]=m;a[d++]=p;a[d++]=g;a[d++]=l;a[d++]=0;a[d++]=0;a[d++]=0;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=p;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=l;a[d++]=1;a[d++]=0;a[d++]=1;a[d++]=-1;a[d++]=e;a[d++]=m;a[d++]=p;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=l;a[d++]=1;a[d++]=0;a[d++]=1;a[d++]=0;a[d++]=e;a[d++]=m;a[d++]=p;a[d++]=n;a[d++]=k;a[d++]=g;a[d++]=l;a[d++]=1;a[d++]=0;a[d++]=1;a[d++]=1;a[d++]=e},render:function(e,c,
b,a){var d=e.getAttribLocation(c,"a_pos1"),l=e.getAttribLocation(c,"a_pos2"),h=e.getAttribLocation(c,"a_thickness"),g=e.getAttribLocation(c,"a_tSize"),n=e.getAttribLocation(c,"a_delay"),k=e.getAttribLocation(c,"a_minus"),m=e.getAttribLocation(c,"a_head"),p=e.getAttribLocation(c,"a_headPosition"),t=e.getAttribLocation(c,"a_color"),u=e.getUniformLocation(c,"u_resolution"),q=e.getUniformLocation(c,"u_matrix"),s=e.getUniformLocation(c,"u_matrixHalfPi"),w=e.getUniformLocation(c,"u_matrixHalfPiMinus"),
r=e.getUniformLocation(c,"u_ratio"),v=e.getUniformLocation(c,"u_nodeRatio"),y=e.getUniformLocation(c,"u_arrowHead"),z=e.getUniformLocation(c,"u_scale");c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);e.bufferData(e.ARRAY_BUFFER,b,e.STATIC_DRAW);e.uniform2f(u,a.width,a.height);e.uniform1f(r,a.ratio/Math.pow(a.ratio,a.settings("edgesPowRatio")));e.uniform1f(v,Math.pow(a.ratio,a.settings("nodesPowRatio"))/a.ratio);e.uniform1f(y,5);e.uniform1f(z,a.scalingRatio);e.uniformMatrix3fv(q,!1,a.matrix);e.uniformMatrix2fv(s,
!1,f.utils.matrices.rotation(Math.PI/2,!0));e.uniformMatrix2fv(w,!1,f.utils.matrices.rotation(-Math.PI/2,!0));e.enableVertexAttribArray(d);e.enableVertexAttribArray(l);e.enableVertexAttribArray(h);e.enableVertexAttribArray(g);e.enableVertexAttribArray(n);e.enableVertexAttribArray(k);e.enableVertexAttribArray(m);e.enableVertexAttribArray(p);e.enableVertexAttribArray(t);e.vertexAttribPointer(d,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0);e.vertexAttribPointer(l,2,e.FLOAT,!1,this.ATTRIBUTES*
Float32Array.BYTES_PER_ELEMENT,8);e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16);e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);e.vertexAttribPointer(k,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28);e.vertexAttribPointer(m,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32);e.vertexAttribPointer(p,1,e.FLOAT,
!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36);e.vertexAttribPointer(t,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40);e.drawArrays(e.TRIANGLES,a.start||0,a.count||b.length/this.ATTRIBUTES)},initProgram:function(e){var c,b;c=f.utils.loadShader(e,"attribute vec2 a_pos1;\nattribute vec2 a_pos2;\nattribute float a_thickness;\nattribute float a_tSize;\nattribute float a_delay;\nattribute float a_minus;\nattribute float a_head;\nattribute float a_headPosition;\nattribute float a_color;\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_nodeRatio;\nuniform float u_arrowHead;\nuniform float u_scale;\nuniform mat3 u_matrix;\nuniform mat2 u_matrixHalfPi;\nuniform mat2 u_matrixHalfPiMinus;\nvarying vec4 color;\nvoid main() {\nvec2 pos = normalize(a_pos2 - a_pos1);\nmat2 matrix = (1.0 - a_head) *\n(\na_minus * u_matrixHalfPiMinus +\n(1.0 - a_minus) * u_matrixHalfPi\n) + a_head * (\na_headPosition * u_matrixHalfPiMinus * 0.6 +\n(a_headPosition * a_headPosition - 1.0) * mat2(1.0)\n);\npos = a_pos1 + (\n(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +\na_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +\na_delay * pos * (\na_tSize / u_nodeRatio +\nu_arrowHead * a_thickness * u_ratio\n)\n);\ngl_Position = vec4(\n((u_matrix * vec3(pos, 1)).xy /\nu_resolution * 2.0 - 1.0) * vec2(1, -1),\n0,\n1\n);\nfloat c = a_color;\ncolor.b = mod(c, 256.0); c = floor(c / 256.0);\ncolor.g = mod(c, 256.0); c = floor(c / 256.0);\ncolor.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\ncolor.a = 1.0;\n}",
e.VERTEX_SHADER);b=f.utils.loadShader(e,"precision mediump float;\nvarying vec4 color;\nvoid main(void) {\ngl_FragColor = color;\n}",e.FRAGMENT_SHADER);return f.utils.loadProgram(e,[c,b])}}})();(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.canvas.labels");f.canvas.labels.def=function(c,b,a){var d,e=a("prefix")||"",f=c[e+"size"];f<a("labelThreshold")||"string"!==typeof c.label||(d="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*f,b.font=(a("fontStyle")?
a("fontStyle")+" ":"")+d+"px "+a("font"),b.fillStyle="node"===a("labelColor")?c.color||a("defaultNodeColor"):a("defaultLabelColor"),b.fillText(c.label,Math.round(c[e+"x"]+f+3),Math.round(c[e+"y"]+d/3)))}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.canvas.hovers");f.canvas.hovers.def=function(c,b,a){var d,e,h,g,n;d=a("hoverFontStyle")||a("fontStyle");var k=a("prefix")||"",m=c[k+"size"],p="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*
m;b.font=(d?d+" ":"")+p+"px "+(a("hoverFont")||a("font"));b.beginPath();b.fillStyle="node"===a("labelHoverBGColor")?c.color||a("defaultNodeColor"):a("defaultHoverLabelBGColor");a("labelHoverShadow")&&(b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=8,b.shadowColor=a("labelHoverShadowColor"));"string"===typeof c.label&&(d=Math.round(c[k+"x"]-p/2-2),e=Math.round(c[k+"y"]-p/2-2),h=Math.round(b.measureText(c.label).width+p/2+m+7),g=Math.round(p+4),n=Math.round(p/2+2),b.moveTo(d,e+n),b.arcTo(d,e,d+n,
e,n),b.lineTo(d+h,e),b.lineTo(d+h,e+g),b.lineTo(d+n,e+g),b.arcTo(d,e+g,d,e+g-n,n),b.lineTo(d,e+n),b.closePath(),b.fill(),b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=0);0<a("borderSize")&&(b.beginPath(),b.fillStyle="node"===a("nodeBorderColor")?c.color||a("defaultNodeColor"):a("defaultNodeBorderColor"),b.arc(c[k+"x"],c[k+"y"],m+a("borderSize"),0,2*Math.PI,!0),b.closePath(),b.fill());(f.canvas.nodes[c.type]||f.canvas.nodes.def)(c,b,a);"string"===typeof c.label&&(b.fillStyle="node"===a("labelHoverColor")?
c.color||a("defaultNodeColor"):a("defaultLabelHoverColor"),b.fillText(c.label,Math.round(c[k+"x"]+m+3),Math.round(c[k+"y"]+p/3)))}}).call(this);(function(){f.utils.pkg("sigma.canvas.nodes");f.canvas.nodes.def=function(e,c,b){var a=b("prefix")||"";c.fillStyle=e.color||b("defaultNodeColor");c.beginPath();c.arc(e[a+"x"],e[a+"y"],e[a+"size"],0,2*Math.PI,!0);c.closePath();c.fill()}})();(function(){f.utils.pkg("sigma.canvas.edges");f.canvas.edges.def=function(e,c,b,a,d){var l=e.color,h=d("prefix")||"",
g=d("edgeColor"),n=d("defaultNodeColor"),k=d("defaultEdgeColor");if(!l)switch(g){case "source":l=c.color||n;break;case "target":l=b.color||n;break;default:l=k}a.strokeStyle=l;a.lineWidth=e[h+"size"]||1;a.beginPath();a.moveTo(c[h+"x"],c[h+"y"]);a.lineTo(b[h+"x"],b[h+"y"]);a.stroke();d("drawEdgeLabels")&&f.canvas.labels.edges.def(e,c,b,a,d)}})();(function(){f.utils.pkg("sigma.canvas.edges");f.canvas.edges.curve=function(e,c,b,a,d){var f=e.color,h=d("prefix")||"",g=d("edgeColor"),n=d("defaultNodeColor");
d=d("defaultEdgeColor");if(!f)switch(g){case "source":f=c.color||n;break;case "target":f=b.color||n;break;default:f=d}a.strokeStyle=f;a.lineWidth=e[h+"size"]||1;a.beginPath();a.moveTo(c[h+"x"],c[h+"y"]);a.quadraticCurveTo((c[h+"x"]+b[h+"x"])/2+(b[h+"y"]-c[h+"y"])/4,(c[h+"y"]+b[h+"y"])/2+(c[h+"x"]-b[h+"x"])/4,b[h+"x"],b[h+"y"]);a.stroke()}})();(function(){f.utils.pkg("sigma.canvas.edges");f.canvas.edges.arrow=function(e,c,b,a,d){var l=e.color,h=d("prefix")||"",g=d("edgeColor"),n=d("defaultNodeColor"),
k=d("defaultEdgeColor"),m=e[h+"size"]||1,p=b[h+"size"],t=c[h+"x"],u=c[h+"y"],q=b[h+"x"],s=b[h+"y"],w=2.5*m,r=Math.sqrt(Math.pow(q-t,2)+Math.pow(s-u,2)),h=t+(q-t)*(r-w-p)/r,p=u+(s-u)*(r-w-p)/r,q=(q-t)*w/r,s=(s-u)*w/r;if(!l)switch(g){case "source":l=c.color||n;break;case "target":l=b.color||n;break;default:l=k}a.strokeStyle=l;a.lineWidth=m;a.beginPath();a.moveTo(t,u);a.lineTo(h,p);a.stroke();a.fillStyle=l;a.beginPath();a.moveTo(h+q,p+s);a.lineTo(h+0.6*s,p-0.6*q);a.lineTo(h-0.6*s,p+0.6*q);a.lineTo(h+
q,p+s);a.closePath();a.fill();d("drawEdgeLabels")&&f.canvas.labels.edges.def(e,c,b,a,d)}})();(function(){f.utils.pkg("sigma.canvas.edges").curvedArrow=function(e,c,b,a,d){var f=e.color,h=d("prefix")||"",g=d("edgeColor"),n=d("defaultNodeColor");d=d("defaultEdgeColor");e=e[h+"size"]||1;var k=b[h+"size"],m=c[h+"x"],p=c[h+"y"],t=(c[h+"x"]+b[h+"x"])/2+(b[h+"y"]-c[h+"y"])/4,u=(c[h+"y"]+b[h+"y"])/2+(c[h+"x"]-b[h+"x"])/4,q=b[h+"x"],s=b[h+"y"],w=2.5*e,r=Math.sqrt(Math.pow(q-t,2)+Math.pow(s-u,2)),h=t+(q-t)*
(r-w-k)/r,k=u+(s-u)*(r-w-k)/r,q=(q-t)*w/r,s=(s-u)*w/r;if(!f)switch(g){case "source":f=c.color||n;break;case "target":f=b.color||n;break;default:f=d}a.strokeStyle=f;a.lineWidth=e;a.beginPath();a.moveTo(m,p);a.quadraticCurveTo(t,u,h,k);a.stroke();a.fillStyle=f;a.beginPath();a.moveTo(h+q,k+s);a.lineTo(h+0.6*s,k-0.6*q);a.lineTo(h-0.6*s,k+0.6*q);a.lineTo(h+q,k+s);a.closePath();a.fill()}})();(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.middlewares");f.utils.pkg("sigma.utils");
f.middlewares.rescale=function(c,b,a){var d,e,h,g,n,k,m,p=this.graph.nodes(),t=this.graph.edges();d=this.settings.embedObjects(a||{});m=d("bounds")||f.utils.getBoundaries(this.graph,c,!0);a=m.minX;var u=m.minY,q=m.maxX,s=m.maxY;h=m.sizeMax;n=m.weightMax;g=d("width")||1;e=d("height")||1;m="outside"===d("scalingMode")?Math.max(g/Math.max(q-a,1),e/Math.max(s-u,1)):Math.min(g/Math.max(q-a,1),e/Math.max(s-u,1));m=(d("rescaleIgnoreSize")?0:(d("maxNodeSize")||h)/m)+(d("sideMargin")||0);q+=m;a-=m;s+=m;u-=
m;m="outside"===d("scalingMode")?Math.max(g/Math.max(q-a,1),e/Math.max(s-u,1)):Math.min(g/Math.max(q-a,1),e/Math.max(s-u,1));d("maxNodeSize")||d("minNodeSize")?d("maxNodeSize")===d("minNodeSize")?(h=0,g=+d("maxNodeSize")):(h=(d("maxNodeSize")-d("minNodeSize"))/h,g=+d("minNodeSize")):(h=1,g=0);d("maxEdgeSize")||d("minEdgeSize")?(n=d("maxEdgeSize")===d("minEdgeSize")?0:(d("maxEdgeSize")-d("minEdgeSize"))/n,k=+d("minEdgeSize")):(n=1,k=0);d=0;for(e=t.length;d<e;d++)t[d][b+"size"]=t[d][c+"size"]*n+k;d=
0;for(e=p.length;d<e;d++)p[d][b+"size"]=p[d][c+"size"]*h+g,p[d][b+"x"]=(p[d][c+"x"]-(q+a)/2)*m,p[d][b+"y"]=(p[d][c+"y"]-(s+u)/2)*m};f.utils.getBoundaries=function(c,b,a){var d,e=c.edges();c=c.nodes();var f=-Infinity,g=-Infinity,n=Infinity,k=Infinity,m=-Infinity,p=-Infinity;if(a)for(a=0,d=e.length;a<d;a++)f=Math.max(e[a][b+"size"],f);a=0;for(d=c.length;a<d;a++)g=Math.max(c[a][b+"size"],g),m=Math.max(c[a][b+"x"],m),n=Math.min(c[a][b+"x"],n),p=Math.max(c[a][b+"y"],p),k=Math.min(c[a][b+"y"],k);return{weightMax:f||
1,sizeMax:g||1,minX:n,minY:k,maxX:m,maxY:p}}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.middlewares");f.middlewares.copy=function(c,b){var a,d,e;if(b+""!==c+""){e=this.graph.nodes();a=0;for(d=e.length;a<d;a++)e[a][b+"x"]=e[a][c+"x"],e[a][b+"y"]=e[a][c+"y"],e[a][b+"size"]=e[a][c+"size"];e=this.graph.edges();a=0;for(d=e.length;a<d;a++)e[a][b+"size"]=e[a][c+"size"]}}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";
f.utils.pkg("sigma.misc.animation.running");var c=function(){var b=0;return function(){return""+ ++b}}();f.misc.animation.camera=function(b,a,d){var l,h,g,n;if(!(b instanceof f.classes.camera&&"object"===typeof a&&a))throw"animation.camera: Wrong arguments.";if("number"!==typeof a.x&&"number"!==typeof a.y&&"number"!==typeof a.ratio&&"number"!==typeof a.angle)throw"There must be at least one valid coordinate in the given val.";var k,m,p,t,u=d||{},q=f.utils.dateNow();l=b.x;h=b.y;g=b.ratio;n=b.angle;
t="function"!==typeof u.easing?f.utils.easings[u.easing||"quadraticInOut"]:u.easing;k=function(){var c;c=u.duration?(f.utils.dateNow()-q)/u.duration:1;if(1<=c){if(b.isAnimated=!1,b.goTo({x:a.x!==e?a.x:l,y:a.y!==e?a.y:h,ratio:a.ratio!==e?a.ratio:g,angle:a.angle!==e?a.angle:n}),cancelAnimationFrame(m),delete f.misc.animation.running[m],"function"===typeof u.onComplete)u.onComplete()}else{c=t(c);b.isAnimated=!0;b.goTo({x:a.x!==e?l+(a.x-l)*c:l,y:a.y!==e?h+(a.y-h)*c:h,ratio:a.ratio!==e?g+(a.ratio-g)*c:
g,angle:a.angle!==e?n+(a.angle-n)*c:n});if("function"===typeof u.onNewFrame)u.onNewFrame();p.frameId=requestAnimationFrame(k)}};m=c();p={frameId:requestAnimationFrame(k),target:b,type:"camera",options:u,fn:k};f.misc.animation.running[m]=p;return m};f.misc.animation.kill=function(b){if(1!==arguments.length||"number"!==typeof b)throw"animation.kill: Wrong arguments.";var a=f.misc.animation.running[b];if(a&&(cancelAnimationFrame(b),delete f.misc.animation.running[a.frameId],"camera"===a.type&&(a.target.isAnimated=
!1),"function"===typeof(a.options||{}).onComplete))a.options.onComplete();return this};f.misc.animation.killAll=function(b){var a,c=0,e="string"===typeof b?b:null,h="object"===typeof b?b:null,g=f.misc.animation.running;for(a in g)if(!(e&&g[a].type!==e||h&&g[a].target!==h)&&(b=f.misc.animation.running[a],cancelAnimationFrame(b.frameId),delete f.misc.animation.running[a],"camera"===b.type&&(b.target.isAnimated=!1),c++,"function"===typeof(b.options||{}).onComplete))b.options.onComplete();return c};f.misc.animation.has=
function(b){var a,c="string"===typeof b?b:null;b="object"===typeof b?b:null;var e=f.misc.animation.running;for(a in e)if(!(c&&e[a].type!==c||b&&e[a].target!==b))return!0;return!1}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.misc");f.misc.bindEvents=function(c){function b(a){a&&(f="x"in a.data?a.data.x:f,g="y"in a.data?a.data.y:g);var b,d,e,l,q,s;a=[];var w=f+n.width/2,r=g+n.height/2;b=n.camera.cameraPosition(f,g);var v=n.camera.quadtree.point(b.x,
b.y);if(v.length)for(b=0,e=v.length;b<e;b++)if(l=v[b],d=l[c+"x"],q=l[c+"y"],s=l[c+"size"],!l.hidden&&w>d-s&&w<d+s&&r>q-s&&r<q+s&&Math.sqrt(Math.pow(w-d,2)+Math.pow(r-q,2))<s){q=!1;for(d=0;d<a.length;d++)if(l.size>a[d].size){a.splice(d,0,l);q=!0;break}q||a.push(l)}return a}function a(a){function c(a){if(n.settings("eventsEnabled")){d=b(a);var f,g,l=[],h=[],k={},m=d.length;for(a=0;a<m;a++)g=d[a],k[g.id]=g,e[g.id]||(h.push(g),e[g.id]=g);for(f in e)k[f]||(l.push(e[f]),delete e[f]);a=0;for(m=h.length;a<
m;a++)n.dispatchEvent("overNode",{node:h[a]});a=0;for(m=l.length;a<m;a++)n.dispatchEvent("outNode",{node:l[a]});h.length&&n.dispatchEvent("overNodes",{nodes:h});l.length&&n.dispatchEvent("outNodes",{nodes:l})}}var d,e={};a.bind("click",function(a){n.settings("eventsEnabled")&&(n.dispatchEvent("click",a.data),d=b(a),d.length?(n.dispatchEvent("clickNode",{node:d[0]}),n.dispatchEvent("clickNodes",{node:d})):n.dispatchEvent("clickStage"))});a.bind("mouseup",c);a.bind("mousemove",c);a.bind("mouseout",
function(a){if(n.settings("eventsEnabled")){var b,c;a=[];for(b in e)a.push(e[b]);e={};b=0;for(c=a.length;b<c;b++)n.dispatchEvent("outNode",{node:a[b]});a.length&&n.dispatchEvent("outNodes",{nodes:a})}});a.bind("doubleclick",function(a){n.settings("eventsEnabled")&&(n.dispatchEvent("doubleClick",a.data),d=b(a),d.length?(n.dispatchEvent("doubleClickNode",{node:d[0]}),n.dispatchEvent("doubleClickNodes",{node:d})):n.dispatchEvent("doubleClickStage"))});n.bind("render",c)}var d,e,f,g,n=this;d=0;for(e=
this.captors.length;d<e;d++)a(this.captors[d])}}).call(this);(function(e){if("undefined"===typeof f)throw"sigma is not declared";f.utils.pkg("sigma.misc");f.misc.drawHovers=function(c){function b(){a.contexts.hover.canvas.width=a.contexts.hover.canvas.width;var b,e=f.canvas.hovers,g=a.settings.embedObjects({prefix:c});if(g("enableHovering"))for(b in d)d[b].hidden||(e[d[b].type]||e.def)(d[b],a.contexts.hover,g)}var a=this,d={};this.bind("overNodes",function(a){a=a.data.nodes;var c=a.length,e;for(e=
0;e<c;e++)d[a[e].id]=a[e];b()});this.bind("outNodes",function(a){a=a.data.nodes;var c=a.length,e;for(e=0;e<c;e++)delete d[a[e].id];b()});this.bind("render",function(a){b()})}}).call(this);f.conrad=C;return f});
