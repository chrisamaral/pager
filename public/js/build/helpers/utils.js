define(["../ext/strftime"],function(e){function n(e){e=e.substr(0,2)==="//"||e.substr(0,4)==="http"?e:pager.urls.app+e;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].href===e)return!1;return!0}function r(e){return e=_.isString(e)?e:""+e,e.length>=2?e:"0"+e}var t=LazyLoad.css;return LazyLoad.css=function(e,r){if(!e)return;e=_.isArray(e)?e:[e],e=e.filter(n),t.call(LazyLoad,e,r)},Date.prototype.toYMD=function(){return this.getFullYear()+"-"+r(this.getMonth()+1)+"-"+r(this.getDate())},Date.prototype.fromYMD=function(e){var t=new Date(e);return t.toYMD().replace(/\D/g,"")!==e.replace(/\D/g,"")&&(t.setHours(0,0,0,0),t.setTime(t.getTime()+864e5)),t},Date.prototype.toYMDHMS=function(){return e("%Y-%m-%d %H:%M:%S",this)},{doGetCaretPosition:function(e){var t=0;if(document.selection){e.focus();var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}else if(e.selectionStart||e.selectionStart=="0")t=e.selectionStart;return t},setCaretPosition:function(e,t){e.value=e.value;if(e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}},loadAPIKeys:function(e){if(pager.keys)return e(pager.keys);$.get("/"+pager.org.id+"/api/k").done(function(t){t&&_.isObject(t)&&(pager.keys=t,e(t))})}}});