define(["../ext/strftime"],function(d){function e(a){a="//"===a.substr(0,2)||"http"===a.substr(0,4)?a:pager.urls.app+a;for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].href===a)return!1;return!0}function c(a){a=_.isString(a)?a:""+a;return 2<=a.length?a:"0"+a}var f=LazyLoad.css;LazyLoad.css=function(a,b){a&&(a=_.isArray(a)?a:[a],a=a.filter(e),f.call(LazyLoad,a,b))};Date.prototype.toYMD=function(){return this.getFullYear()+"-"+c(this.getMonth()+1)+"-"+c(this.getDate())};Date.prototype.fromYMD=
function(a){var b=new Date(a);b.toYMD().replace(/\D/g,"")!==a.replace(/\D/g,"")&&(b.setHours(0,0,0,0),b.setTime(b.getTime()+864E5));return b};Date.prototype.toYMDHMS=function(){return d("%Y-%m-%d %H:%M:%S",this)};return{doGetCaretPosition:function(a){var b=0;if(document.selection)a.focus(),b=document.selection.createRange(),b.moveStart("character",-a.value.length),b=b.text.length;else if(a.selectionStart||"0"==a.selectionStart)b=a.selectionStart;return b},setCaretPosition:function(a,b){a.value=a.value;
if(null!==a){if(a.createTextRange){var c=a.createTextRange();c.move("character",b);c.select();return!0}if(a.selectionStart||0===a.selectionStart)return a.focus(),a.setSelectionRange(b,b),!0;a.focus();return!1}},loadAPIKeys:function(a){if(pager.keys)return a(pager.keys);$.get("/"+pager.org.id+"/api/k").done(function(b){b&&_.isObject(b)&&(pager.keys=b,a(b))})}}});
