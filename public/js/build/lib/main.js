define(["../helpers/utils","../helpers/consts"],function(l,h){function d(){"urls pages org user org build".split(" ").forEach(function(b){var a=pager[b];a&&Modernizr.localstorage&&localStorage.setItem("pager."+pager.org.id+"."+b,JSON.stringify(a))})}function k(){pager.rootElem=React.renderComponent(e({urls:pager.urls,pages:pager.pages}),document.getElementById("container"));$.get("/"+pager.org.id+"/api/pages").done(function(b){b instanceof Array&&(pager.pages=b.concat(),pager.rootElem.setProps({pages:pager.pages}));
d()});require.run("./app")}pager.constant=h;var e,f,g=location.pathname.split("/");if(g[1])return pager.org={id:g[1]},f=React.createClass({displayName:"PageList",render:function(){var b={"Administra\u00e7\u00e3o":"fi-lock","Configura\u00e7\u00f5es":"fi-wrench"},a=this.props.pages.map(function(a){var c=b[a.name];return React.DOM.li({key:a.name},React.DOM.a({href:a.url},c&&React.DOM.i({className:"the-icon "+c}),a.name))}),c=this.props.urls.base;a.unshift(React.DOM.li({key:"usr.home"},React.DOM.a({href:c+
"/home"},React.DOM.i({className:"the-icon fi-home"}),"In\u00edcio")));a.unshift(React.DOM.li({key:"placeholder"},React.DOM.label(null,"Menu")));a.push(React.DOM.li({key:"usr"},React.DOM.label(null,"Usu\u00e1rio")));a.push(React.DOM.li({key:"usr.settings"},React.DOM.a({href:c+"/user"},React.DOM.i({className:"the-icon fi-torso"}),"Configura\u00e7\u00f5es")));a.push(React.DOM.li({key:"usr.logout"},React.DOM.a({href:c+"/logout"},React.DOM.i({className:"the-icon fi-x"}),"Logout")));return React.DOM.ul({className:"off-canvas-list"},
a)}}),e=React.createClass({displayName:"Root",componentDidMount:function(){$(document).foundation();$("#ScrollRoot").scroll(_.throttle(function(){$(".f-dropdown.open").removeClass("open")},300))},render:function(){var b=this.props.app;return React.DOM.div({id:"ScrollRoot","data-offcanvas":!0,className:"off-canvas-wrap"},React.DOM.div({className:"inner-wrap"},React.DOM.nav({id:"TopBar",className:"tab-bar"},React.DOM.section({className:"middle tab-bar-section"},React.DOM.h1({className:"title"},"Pager - Sim Tv")),
React.DOM.section({className:"right-small"},React.DOM.a({className:"right-off-canvas-toggle menu-icon"},React.DOM.span(null)))),React.DOM.aside({className:"right-off-canvas-menu"},f({urls:this.props.urls,pages:this.props.pages})),React.DOM.section({className:"main-section"},b&&b({view:this.props.view,args:this.props.args,lib:this.props.lib}))))}}),pager.pages=[],pager.components={},Modernizr.localstorage&&["urls","pages","org","user"].forEach(function(b){var a=localStorage.getItem("pager."+pager.org.id+
"."+b);pager[b]=a&&JSON.parse(a)||pager[b]}),$(document).ajaxError(function(b,a){401===a.status&&(pager.urls?location.href=pager.urls.base+"/login":location.reload(!0))}),pager.org&&$.get("/"+pager.org.id+"/api").done(function(b){_.isObject(b)&&(_.merge(pager,b),pager.urls.ajax="/"+pager.org.id+"/api/",d())}).always(k),pager;$("body").html("<h1>Erro</h1>")});
