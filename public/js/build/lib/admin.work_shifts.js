/** @jsx React.DOM */define(function(){var e=React.createClass({displayName:"ShiftEditor",getInitialState:function(){return{locked:!1}},unlock:function(){if(!this.isMounted())return;this.setState({locked:!1})},handleSubmit:function(e){e.preventDefault();if(this.state.locked)return;var t=$(this.getDOMNode()),n=$.post(t.attr("action"),t.serialize()).always(this.unlock);this.setState({locked:!0}),this.props.shift._id||n.done(function(){if(!this.isMounted())return;this.refs.nameInput.getDOMNode().value=this.props.shift.name,this.refs.fromInput.getDOMNode().value=this.props.shift.from,this.refs.toInput.getDOMNode().value=this.props.shift.to,this.props.reloadShifts()}.bind(this))},killMe:function(e){e.preventDefault();var t=$(this.getDOMNode());$.ajax({url:t.attr("action"),type:"DELETE"}).done(this.props.reloadShifts)},render:function(){return React.DOM.form({onSubmit:this.handleSubmit,action:pager.urls.ajax+"admin/work_shift"+(this.props.shift._id?"/"+this.props.shift._id:"")},React.DOM.div({className:"row"},React.DOM.div({className:"medium-4 columns"},React.DOM.input({required:!0,type:"text",ref:"nameInput",name:"name",defaultValue:this.props.shift.name})),React.DOM.div({className:"medium-3 columns"},React.DOM.input({required:!0,type:"time",ref:"fromInput",name:"from",defaultValue:this.props.shift.from})),React.DOM.div({className:"medium-3 columns"},React.DOM.input({required:!0,type:"time",ref:"toInput",name:"to",defaultValue:this.props.shift.to})),React.DOM.div({className:"medium-1 columns"},React.DOM.button({className:"fi-save button postfix success"})),React.DOM.div({className:"medium-1 columns"},this.props.shift._id?React.DOM.button({className:"fi-x button postfix alert",onClick:this.killMe}):null)))}}),t=React.createClass({displayName:"Shifts",getInitialState:function(){return{shifts:[],defaultShift:{name:"",from:"08:00",to:"17:00"}}},componentDidMount:function(){this.reloadShifts()},reloadShifts:function(){$.get(pager.urls.ajax+"admin/work_shifts").done(function(e){if(!this.isMounted())return;this.setState({shifts:e})}.bind(this))},render:function(){return React.DOM.div(null,React.DOM.div({className:"row"},React.DOM.div({className:"medium-4 columns"},"Nome do Turno"),React.DOM.div({className:"medium-3 columns"},"In√≠cio"),React.DOM.div({className:"medium-3 columns"},"Fim"),React.DOM.div({className:"medium-2 columns text-center"},"#")),React.DOM.br(null),this.state.shifts.map(function(t){return e({key:t._id,shift:t,reloadShifts:this.reloadShifts})}.bind(this)),e({reloadShifts:this.reloadShifts,shift:this.state.defaultShift}))}});return t});