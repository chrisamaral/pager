define(function(){var d,f;d=React.createClass({displayName:"WorkerCfg",killMe:function(){this.props.removeUser(this.props.index)},render:function(){return React.DOM.div({className:"row"},React.DOM.div({className:"small-6 columns"},React.DOM.a({title:"Descartar",className:"wCfgX",onClick:this.killMe},React.DOM.i({className:"fi-x"})),this.props.worker.name),React.DOM.div({className:"small-3 columns"},React.DOM.select({className:"pointSelector","data-collection":"points","data-field":"startPoint","data-worker":this.props.worker._id},
this.props.options.points.map(function(a,b){return React.DOM.option({key:b,value:b},a.address)}))),React.DOM.div({className:"small-3 columns"},React.DOM.select({className:"shiftSelector","data-collection":"workShifts","data-field":"workShift","data-worker":this.props.worker._id},this.props.options.workShifts.map(function(a,b){return React.DOM.option({key:b,value:b},a.from+" <> "+a.to)}))))}});f=React.createClass({displayName:"CfgForm",handleSubmit:function(a){a.preventDefault();var b=this.props.workers,
d=this;$(this.getDOMNode()).find(".pointSelector,.shiftSelector").each(function(){var a=_.find(b,{_id:$(this).data("worker")}),e,c;if(!a)return!0;e=$(this).data("field");c=$(this).data("collection");c=_.cloneDeep(d.props.options[c][$(this).val()]);a[e]="startPoint"===e?c.location:c});this.props.submitWorkers(b)},cancel:function(a){a.preventDefault();this.props.submitWorkers(null)},render:function(){return React.DOM.form({onSubmit:this.handleSubmit},React.DOM.div({className:"cfgForm"},React.DOM.div({className:"row"},
React.DOM.div({className:"small-6 columns"},React.DOM.strong(null,"Nome")),React.DOM.div({className:"small-3 columns"},React.DOM.strong(null,"Partida")),React.DOM.div({className:"small-3 columns"},React.DOM.strong(null,"Hor\u00e1rio"))),React.DOM.div({className:"workersCfg"},this.props.workers.map(function(a,b){return d({index:b,worker:a,removeUser:this.props.removeUser,key:a._id,options:this.props.options})}.bind(this))),React.DOM.div({className:"row"},React.DOM.div({className:"small-12 columns text-right"},
React.DOM.button({className:"small alert button",onClick:this.cancel},"Cancelar"),React.DOM.button({className:"small success button"},"Salvar")))))}});return React.createClass({displayName:"RouterCfg",getInitialState:function(){return{options:null,workers:this.props.workers}},componentDidMount:function(){$.get(pager.urls.ajax+"console/routerConfigOptions").done(function(a){this.setState({options:a})}.bind(this));$("#ScrollRoot").trigger("resize")},componentDidUpdate:function(){},killUserAt:function(a){var b=
this.state.workers;b.splice(a,1);this.setState({workers:b},function(){$("#ScrollRoot").trigger("resize")})},render:function(){return React.DOM.div(null,this.state.options?f({options:this.state.options,removeUser:this.killUserAt,workers:this.state.workers,submitWorkers:this.props.onSet}):React.DOM.p(null,React.DOM.i(null,"Carregando Op\u00e7\u00f5es...")))}})});
