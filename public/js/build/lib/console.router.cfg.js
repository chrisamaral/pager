/** @jsx React.DOM */define(function(){var e,t,n;return t=React.createClass({displayName:"WorkerCfg",killMe:function(){this.props.removeUser(this.props.index)},render:function(){return React.DOM.div({className:"row"},React.DOM.div({className:"medium-6 columns"},React.DOM.a({title:"Descartar",className:"wCfgX",onClick:this.killMe},React.DOM.i({className:"fi-x"})),this.props.worker.name),React.DOM.div({className:"medium-3 columns"},React.DOM.select({className:"pointSelector","data-collection":"points","data-field":"startPoint","data-worker":this.props.worker._id},this.props.options.points.map(function(e,t){return React.DOM.option({key:t,value:t},e.name)}))),React.DOM.div({className:"medium-3 columns"},React.DOM.select({className:"shiftSelector","data-collection":"workShifts","data-field":"workShift","data-worker":this.props.worker._id},this.props.options.workShifts.map(function(e,t){return React.DOM.option({key:t,value:t},e.name)}))))}}),n=React.createClass({displayName:"CfgForm",handleSubmit:function(e){e.preventDefault();var t=this.props.workers,n=this,r=$(this.getDOMNode());r.find(".pointSelector,.shiftSelector").each(function(){var e=_.find(t,{_id:$(this).data("worker")}),r,i,s;if(!e)return!0;r=$(this).data("field"),i=$(this).data("collection"),s=_.cloneDeep(n.props.options[i][$(this).val()]),e[r]=r==="startPoint"?s.location:s}),this.props.submitWorkers(t)},cancel:function(e){e.preventDefault(),this.props.submitWorkers(null)},render:function(){return React.DOM.form({onSubmit:this.handleSubmit},React.DOM.div({className:"cfgForm"},React.DOM.div({className:"row"},React.DOM.div({className:"medium-6 columns"},React.DOM.strong(null,"Nome")),React.DOM.div({className:"medium-3 columns"},React.DOM.strong(null,"Partida")),React.DOM.div({className:"medium-3 columns"},React.DOM.strong(null,"Horário"))),React.DOM.div({className:"workersCfg"},this.props.workers.map(function(e,n){return t({index:n,worker:e,removeUser:this.props.removeUser,key:e._id,options:this.props.options})}.bind(this))),React.DOM.div({className:"row"},React.DOM.div({className:"medium-12 columns text-right"},React.DOM.button({className:"small alert button",onClick:this.cancel},"Cancelar"),React.DOM.button({className:"small success button"},"Salvar")))))}}),e=React.createClass({displayName:"RouterCfg",getInitialState:function(){return{options:null,workers:null}},componentDidMount:function(){$.get(pager.urls.ajax+"console/routerConfigOptions").done(function(e){this.setState({options:e})}.bind(this)),$.get(pager.urls.ajax+"console/workers/"+this.props.day).done(function(e){this.setState({workers:e})}.bind(this)),$("#Console").trigger("resize")},killUserAt:function(e){var t=this.state.workers;t.splice(e,1),this.setState({workers:t},function(){$("#Console").trigger("resize")})},render:function(){return React.DOM.div(null,this.state.options&&this.state.workers?n({options:this.state.options,removeUser:this.killUserAt,workers:this.state.workers,submitWorkers:this.props.onSet}):React.DOM.p(null,React.DOM.i(null,"Carregando Opções...")))}}),e});